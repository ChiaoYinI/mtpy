
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>mtpy.core.mt_xml &#8212; mtpy 1.01.01 documentation</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../master_doc.html">mtpy 1.01.01 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for mtpy.core.mt_xml</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">.. module:: mt_xml</span>
<span class="sd">   :synopsis: Deal with XML MT files </span>

<span class="sd">.. moduleauthor:: Jared Peacock &lt;jpeacock@usgs.gov&gt;</span>

<span class="sd">.. note:: This module is written to align with the tools written by</span>
<span class="sd">          Anna Kelbert &lt;akelbert@usgs.gov&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1">#==============================================================================</span>
<span class="c1"># Imports</span>
<span class="c1">#==============================================================================</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">xml.etree.cElementTree</span> <span class="k">as</span> <span class="nn">ET</span>
<span class="kn">from</span> <span class="nn">xml.dom</span> <span class="k">import</span> <span class="n">minidom</span>

<span class="kn">import</span> <span class="nn">mtpy.core.z</span> <span class="k">as</span> <span class="nn">mtz</span>

<span class="n">dt_fmt</span> <span class="o">=</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span>

<span class="c1">#==============================================================================</span>
<span class="c1"># Generic object to hold information</span>
<span class="c1">#==============================================================================</span>
<div class="viewcode-block" id="XML_element"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt_xml.XML_element">[docs]</a><span class="k">class</span> <span class="nc">XML_element</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Basically an ET element.  The key components are</span>
<span class="sd">        * &#39;name&#39;  --&gt; name of the element</span>
<span class="sd">        * &#39;attr&#39;  --&gt; attribute information of the element</span>
<span class="sd">        * &#39;value&#39; --&gt; value of the element</span>
<span class="sd">        </span>
<span class="sd">    Used the property function here to be sure that these 3 cannot be set </span>
<span class="sd">    through the common k.value = 10, just in case there are similar names in </span>
<span class="sd">    the xml file.  This seemed to be the safest to avoid those cases.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attr</span> <span class="o">=</span> <span class="n">attr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span>
        
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span>
    
    <span class="nd">@value</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s1">&#39;Cannot set </span><span class="si">{0}</span><span class="s1"> to string, set to None&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="kc">None</span>
            
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">attr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attr</span>
    
    <span class="nd">@attr</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;attr needs to be a dictionary, not </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">attr</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_attr</span> <span class="o">=</span> <span class="n">attr</span>
            
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span></div>
    
<span class="c1">#==============================================================================</span>
<span class="c1"># General information</span>
<span class="c1">#==============================================================================</span>
<span class="n">conditions_of_use</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;All data and metadata for this survey are &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;available free of charge and may be copied &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;freely, duplicated and further distributed &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;provided this data set is cited as the &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;reference. While the author(s) strive to &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;provide data and metadata of best possible &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;quality, neither the author(s) of this data &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;set, not IRIS make any claims, promises, or &#39;</span><span class="p">,</span> 
                             <span class="s1">&#39;guarantees about the accuracy, completeness, &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;or adequacy of this information, and expressly &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;disclaim liability for errors and omissions in &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;the contents of this file. Guidelines about &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;the quality or limitations of the data and &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;metadata, as obtained from the author(s), are &#39;</span><span class="p">,</span>
                             <span class="s1">&#39;included for informational purposes only.&#39;</span><span class="p">])</span>
                     
<span class="n">estimates</span> <span class="o">=</span> <span class="p">[</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Estimate&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;real&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;VAR&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Variance&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                      <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Error Estimate&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Variance&#39;</span><span class="p">)}),</span>
            
             <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Estimate&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;COV&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>  
                   <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                          <span class="s1">&#39;Full covariance between each two TF components&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                      <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Error Estimate&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Covariance&#39;</span><span class="p">)}),</span>
             
             <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Estimate&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;INVSIGCOV&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>  
                   <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                          <span class="s1">&#39;Inverse Coherent Signal Power Matrix S&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                      <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Signal Power Estimate&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;inverse_signal_covariance&#39;</span><span class="p">)}),</span>
             
             <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Estimate&#39;</span><span class="p">,{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;RESIDCOV&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>  
                   <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span> 
                                          <span class="s1">&#39;Residual Covariance N&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                      <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Error Estimate&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Coherence&#39;</span><span class="p">)}),</span>
             
             <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Estimate&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;COH&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>  
                   <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Coherence&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                      <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Signal Coherence&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Coherence&#39;</span><span class="p">)}),</span>
             
             <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Estimate&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;PREDCOH&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>  
                   <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Multiple Coherence&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                      <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Signal Coherence&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Multiple_Coherence&#39;</span><span class="p">)}),</span>
             
             <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Estimate&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;SIGAMP&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>  
                   <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Signal Amplitude&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                      <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Signal Power Estimates&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Signal_Amplitude&#39;</span><span class="p">)}),</span>
             
             <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Estimate&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;SIGNOISE&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>  
                   <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Signal Noise&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                      <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Error Estimates&#39;</span><span class="p">),</span>
                      <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Signal_Noise&#39;</span><span class="p">)})]</span>
                       
<span class="n">data_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;DataType&#39;</span><span class="p">,</span>
                    <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;[mV/km]/[nT]&#39;</span><span class="p">,</span> 
                     <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> 
                     <span class="s1">&#39;input&#39;</span><span class="p">:</span><span class="s1">&#39;H&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;output&#39;</span><span class="p">:</span><span class="s1">&#39;E&#39;</span><span class="p">},</span>
                     <span class="kc">None</span><span class="p">,</span> 
                     <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;MT impedance&#39;</span><span class="p">),</span>
                       <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                       <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;primary data type&#39;</span><span class="p">),</span>
                       <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;impedance&#39;</span><span class="p">)}),</span>
              
              <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;DataType&#39;</span><span class="p">,</span>
                    <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;[]&#39;</span><span class="p">,</span> 
                     <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> 
                     <span class="s1">&#39;input&#39;</span><span class="p">:</span><span class="s1">&#39;H&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;output&#39;</span><span class="p">:</span><span class="s1">&#39;H&#39;</span><span class="p">},</span>
                     <span class="kc">None</span><span class="p">,</span> 
                     <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                            <span class="s1">&#39;Tipper-Vertical Field Transfer Function&#39;</span><span class="p">),</span>
                       <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                       <span class="s1">&#39;Intention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Intention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;primary data type&#39;</span><span class="p">),</span>
                       <span class="s1">&#39;Tag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;tipper&#39;</span><span class="p">)})]</span>
<span class="c1">#==============================================================================</span>
<span class="c1"># Useful Functions</span>
<span class="c1">#==============================================================================                </span>
<div class="viewcode-block" id="XML_Config"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt_xml.XML_Config">[docs]</a><span class="k">class</span> <span class="nc">XML_Config</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to deal with configuration files for xml.</span>
<span class="sd">    </span>
<span class="sd">    Includes all the important information for the station and how data was </span>
<span class="sd">    processed.  </span>
<span class="sd">    </span>
<span class="sd">    Key Information includes:</span>
<span class="sd">        </span>
<span class="sd">    ======================== ==================================================</span>
<span class="sd">    Name                     Purpose</span>
<span class="sd">    ======================== ==================================================</span>
<span class="sd">    ProductID                Station name</span>
<span class="sd">    ExternalUrl              External URL to link to data</span>
<span class="sd">    Notes                    Any important information on station, </span>
<span class="sd">                             data collection.</span>
<span class="sd">    TimeSeriesArchived       Information on Archiving time series including </span>
<span class="sd">                             URL.   </span>
<span class="sd">    Image                    A location to an image of the station or</span>
<span class="sd">                             the MT response.</span>
<span class="sd">    ======================== ==================================================    </span>
<span class="sd">    * ProductID --&gt; station name</span>
<span class="sd">        * ExternalUrl --&gt; external url to link to data</span>
<span class="sd">        * Notes --&gt; any </span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>    
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="c1"># Initialize the default attributes and values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Description</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> 
                                 <span class="kc">None</span><span class="p">,</span> 
                                 <span class="s1">&#39;Magnetotelluric Transfer Functions&#39;</span><span class="p">)</span>
                                 
        <span class="bp">self</span><span class="o">.</span><span class="n">ProductId</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ProductID&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Project</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Project&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Survey</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Survey&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Country</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Country&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
       
        <span class="bp">self</span><span class="o">.</span><span class="n">SubType</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;SubType&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;MT_FT&#39;</span><span class="p">)</span>
       
        <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Notes&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Tags</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Tags&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;impedance, tipper&#39;</span><span class="p">)</span>
        
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Image</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Image&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                           <span class="o">**</span><span class="p">{</span><span class="s1">&#39;PrimaryData&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;PrimaryData&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                              <span class="s1">&#39;Filename&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Filename&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})</span>
                              
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Original</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Original&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                              <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Attachment&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Attachment&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                 <span class="s1">&#39;Filename&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Filename&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})</span>
        
       
        <span class="bp">self</span><span class="o">.</span><span class="n">TimeSeriesArchived</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;TimeSeriesArchived&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                        <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Value&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Value&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> 
                                           <span class="s1">&#39;URL&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;URL&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ExternalUrl</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                 <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                    <span class="s1">&#39;Url&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Url&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">PrimaryData</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;PrimaryData&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                 <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Filename&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Filename&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})</span>
                                    
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Attachment</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Attachment&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Filename&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Filename&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                   <span class="s1">&#39;Description&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                                       <span class="s1">&#39;Original file use to produce XML&#39;</span><span class="p">)})</span>
                                   
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Provenance&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                <span class="o">**</span><span class="p">{</span><span class="s1">&#39;CreationTime&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;CreationTime&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                                     <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
                                                     <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">(),</span> 
                                                     <span class="n">dt_fmt</span><span class="p">)),</span>
                                    <span class="s1">&#39;CreatingApplication&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;CreatingApplication&#39;</span><span class="p">,</span> 
                                                                <span class="kc">None</span><span class="p">,</span> 
                                                                <span class="s1">&#39;MTpy.core.mtxml&#39;</span><span class="p">),</span>
                                    <span class="s1">&#39;Submitter&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Submitter&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                                      <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Name&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Email&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Email&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Org&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Org&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;OrgURL&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;OrgURL&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                    <span class="s1">&#39;Creator&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Creator&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                                    <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Name&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                       <span class="s1">&#39;Email&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Email&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                       <span class="s1">&#39;Org&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Org&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                       <span class="s1">&#39;OrgURL&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;OrgURL&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})})</span>
                                                       
        <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Copyright&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                               <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Citation&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Citation&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                                   <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Title&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                      <span class="s1">&#39;Authors&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Authors&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                      <span class="s1">&#39;Year&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                      <span class="s1">&#39;Journal&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Journal&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                      <span class="s1">&#39;Volume&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Volume&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                      <span class="s1">&#39;DOI&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;DOI&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                  <span class="s1">&#39;ReleaseStatus&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ReleaseStatus&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Closed&#39;</span><span class="p">),</span>
                                  <span class="s1">&#39;ConditionsOfUse&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ConditionsOfUse&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">conditions_of_use</span><span class="p">),</span>
                                  <span class="s1">&#39;AdditionalInfo&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;AdditionalInfo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Site&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Project&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Project&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                             <span class="s1">&#39;Survey&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Survey&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                             <span class="s1">&#39;YearCollected&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;YearCollected&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                             <span class="s1">&#39;Id&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                             <span class="s1">&#39;Location&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Location&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                              <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Latitude&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Latitude&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                 <span class="s1">&#39;Longitude&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Longitude&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                 <span class="s1">&#39;Elevation&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Elevation&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;meters&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span>
                                                 <span class="s1">&#39;Declination&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Declination&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;epoch&#39;</span><span class="p">:</span><span class="s1">&#39;1995&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">)}),</span>
                            <span class="s1">&#39;Orientation&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Orientation&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;angle_to_geographic_north&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span> 
                            <span class="s1">&#39;AcquiredBy&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;AcquiredBy&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                             <span class="s1">&#39;Start&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Start&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                             <span class="s1">&#39;End&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;End&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                             <span class="s1">&#39;RunList&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;RunList&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})</span>
                             
        <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;FieldNotes&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Instrument&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Instrument&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                                      <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Type&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Manufacturer&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Manufacturer&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Id&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Settings&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Settings&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                    <span class="s1">&#39;Dipole&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Dipole&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;EX&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>
                                                      <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Type&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Manufacturer&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Manufacturer&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Id&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Length&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Length&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;meters&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Azimuth&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Azimuth&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;degrees&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Channel&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Channel&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                    <span class="s1">&#39;Dipole_00&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Dipole&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;EY&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>
                                                      <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Type&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Manufacturer&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Manufacturer&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Id&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Length&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Length&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;meters&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Azimuth&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Azimuth&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;degrees&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Channel&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Channel&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                    <span class="s1">&#39;Magnetometer&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Magnetometer&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;HX&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>
                                                        <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Type&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Manufacturer&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Manufacturer&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Id&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Azimuth&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Azimuth&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;degrees&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Channel&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Channel&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                    <span class="s1">&#39;Magnetometer_00&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Magnetometer&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;HY&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>
                                                        <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Type&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Manufacturer&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Manufacturer&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Id&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Azimuth&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Azimuth&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;degrees&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Channel&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Channel&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                    <span class="s1">&#39;Magnetometer_01&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Magnetometer&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;HZ&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>
                                                        <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Type&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Manufacturer&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Manufacturer&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Id&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Azimuth&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Azimuth&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;degrees&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span>
                                                         <span class="s1">&#39;Channel&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Channel&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                    <span class="s1">&#39;DataQualityNotes&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;DataQualityNotes&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                                             <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Rating&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Rating&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                                 <span class="s1">&#39;GoodFromPeriod&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;GoodFromPeriod&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                                 <span class="s1">&#39;GoodToPeriod&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;GoodToPeriod&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                                 <span class="s1">&#39;Comments&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                    <span class="s1">&#39;DataQualityWarnings&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;DataQualityWarnings&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                                                <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Flag&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Flag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                                                                    <span class="s1">&#39;Comments&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})})</span>
                                  
        <span class="bp">self</span><span class="o">.</span><span class="n">ProcessingInfo</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ProcessingInfo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                    <span class="o">**</span><span class="p">{</span><span class="s1">&#39;ProcessedBy&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ProcessedBy&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                       <span class="s1">&#39;ProcessingSoftware&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ProcessingSoftware&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                                                  <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Name&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                                     <span class="s1">&#39;LastMod&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;LastMod&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                                     <span class="s1">&#39;Version&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Version&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                                     <span class="s1">&#39;Author&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Author&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}),</span>
                                        <span class="s1">&#39;SignConvention&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;SignConvention&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;exp(+i\omega t)&#39;</span><span class="p">),</span>
                                        <span class="s1">&#39;RemoteRef&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;RemoteRef&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;Robust Remote Processing&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">),</span>
                                        <span class="s1">&#39;RemoteInfo&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;RemoteInfo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> 
                                                           <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Project&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Project&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                              <span class="s1">&#39;Survey&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Survey&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                              <span class="s1">&#39;ID&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                              <span class="s1">&#39;AcquiredBy&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;AcquiredBy&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                              <span class="s1">&#39;Name&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                              <span class="s1">&#39;YearCollected&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;YearCollected&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                              <span class="s1">&#39;Location&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Location&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;datum&#39;</span><span class="p">:</span><span class="s1">&#39;WGS84&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">,</span>
                                                                               <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Latitude&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Latitude&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                                                  <span class="s1">&#39;Longitude&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Longitude&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                                                                                  <span class="s1">&#39;Elevation&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Elevation&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;meters&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">)})</span>
                                                               <span class="p">})})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SiteLayout</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;SiteLayout&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                                      <span class="o">**</span><span class="p">{</span><span class="s1">&#39;InputChannels&#39;</span><span class="p">:</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;InputChannels&#39;</span><span class="p">,</span> 
                                                                      <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span><span class="s1">&#39;site&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;m&#39;</span><span class="p">},</span> 
                                                                      <span class="kc">None</span><span class="p">,</span>
                                              <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Magnetic_hx&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Magnetic&#39;</span><span class="p">,</span>
                                                                        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Hx&quot;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;orientation&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0&#39;</span><span class="p">,</span> 
                                                                         <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">},</span>
                                                                         <span class="kc">None</span><span class="p">),</span>
                                                 <span class="s1">&#39;Magnetic_hy&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Magnetic&#39;</span><span class="p">,</span>
                                                                        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Hy&quot;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;orientation&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0&#39;</span><span class="p">,</span> 
                                                                         <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">},</span>
                                                                         <span class="kc">None</span><span class="p">)}),</span>
                                        <span class="s1">&#39;OutputChannels&#39;</span><span class="p">:</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;OutputChannels&#39;</span><span class="p">,</span> 
                                                                      <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span><span class="s1">&#39;site&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;m&#39;</span><span class="p">},</span> 
                                                                      <span class="kc">None</span><span class="p">,</span>
                                              <span class="o">**</span><span class="p">{</span><span class="s1">&#39;Magnetic_hz&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Magnetic&#39;</span><span class="p">,</span>
                                                                        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Hz&quot;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;orientation&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0&#39;</span><span class="p">,</span> 
                                                                         <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">},</span>
                                                                         <span class="kc">None</span><span class="p">),</span>
                                                 <span class="s1">&#39;Electric_ex&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Electric&#39;</span><span class="p">,</span>
                                                                        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;orientation&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0&#39;</span><span class="p">,</span> 
                                                                         <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;x2&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;y2&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;z2&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">},</span>
                                                                         <span class="kc">None</span><span class="p">),</span>
                                                <span class="s1">&#39;Electric_ey&#39;</span><span class="p">:</span><span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Electric&#39;</span><span class="p">,</span>
                                                                        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Ey&quot;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;orientation&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0&#39;</span><span class="p">,</span> 
                                                                         <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;x2&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;y2&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;z2&#39;</span><span class="p">:</span><span class="s1">&#39;0.0&#39;</span><span class="p">},</span>
                                                                         <span class="kc">None</span><span class="p">)})})</span>
                        
<span class="c1">#        self.InputChannels = XML_element(&#39;InputChannels&#39;, {&#39;ref&#39;:&#39;site&#39;, &#39;units&#39;:&#39;m&#39;}, None)</span>
<span class="c1">#        self.OutputChannels = XML_element(&#39;OutputChannels&#39;, {&#39;ref&#39;:&#39;site&#39;, &#39;units&#39;:&#39;m&#39;}, None)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Data</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Data&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PeriodRange</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;PeriodRange&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                                        
        <span class="bp">self</span><span class="o">.</span><span class="n">Datum</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Datum&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;WGS84&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Declination</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Declination&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                 
        <span class="bp">self</span><span class="o">.</span><span class="n">StatisticalEstimates</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;StatisticalEstimates&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>                           
        <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">estimate</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">estimates</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">StatisticalEstimates</span><span class="p">,</span> 
                    <span class="s1">&#39;Estimate_</span><span class="si">{0:02}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">),</span>
                    <span class="n">estimate</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">DataTypes</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;DataTypes&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">d_type</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_types</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DataTypes</span><span class="p">,</span> <span class="s1">&#39;DataType_</span><span class="si">{0:02}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">),</span> <span class="n">d_type</span><span class="p">)</span>
                                   
        
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            
<div class="viewcode-block" id="XML_Config.read_cfg_file"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt_xml.XML_Config.read_cfg_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_cfg_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cfg_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read in a cfg file making all key = value pairs attribures of </span>
<span class="sd">        XML_Config.  Being sure all new attributes are XML_element objects.</span>
<span class="sd">        </span>
<span class="sd">        The assumed structure of the xml.cfg file is similar to:</span>
<span class="sd">            ``# XML Configuration File MTpy</span>
<span class="sd"> </span>
<span class="sd">            Attachement.Description = Original file use to produce XML</span>
<span class="sd">            Attachment.Filename = None</span>
<span class="sd">             </span>
<span class="sd">            Copyright.Citation.Authors = None</span>
<span class="sd">            Copyright.Citation.DOI = None</span>
<span class="sd">            Copyright.Citation.Journal = None</span>
<span class="sd">            Copyright.Citation.Title = None</span>
<span class="sd">            Copyright.Citation.Volume = None</span>
<span class="sd">            Copyright.Citation.Year = None</span>
<span class="sd">            </span>
<span class="sd">            PeriodRange(max=0)(min=0) = None``</span>
<span class="sd">            </span>
<span class="sd">        where the heirarchy of information is separated by a . and if the</span>
<span class="sd">        information has attribures they are in the name with (key=value) </span>
<span class="sd">        syntax.</span>
<span class="sd">        </span>
<span class="sd">        Arguments</span>
<span class="sd">        -------------</span>
<span class="sd">            **cfg_fn** : string</span>
<span class="sd">                         full path to cfg file to read in</span>
<span class="sd">                         </span>
<span class="sd">        Example</span>
<span class="sd">        ---------</span>
<span class="sd">        :Read in xml.cfg file: ::</span>
<span class="sd">        </span>
<span class="sd">            &gt;&gt;&gt; import mtpy.core.mtxml as mtxml</span>
<span class="sd">            &gt;&gt;&gt; cfg_obj = mtxml.XML_Config()</span>
<span class="sd">            &gt;&gt;&gt; cfg_obj.read_cfg_file(r&quot;/home/MT/xml.cfg&quot;)</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>        
        
        <span class="k">if</span> <span class="n">cfg_fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>        
            <span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span> <span class="o">=</span> <span class="n">cfg_fn</span>
            
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">NameError</span><span class="p">(</span><span class="s1">&#39;Could not find </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span><span class="p">))</span>
            
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">fid</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
  
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="c1"># skip comments</span>
            <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
                <span class="k">pass</span>
            
            <span class="c1"># skip blank lines</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="c1"># else assume the line is metadata separated by = </span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_read_cfg_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></div>
                    

    <span class="k">def</span> <span class="nf">_read_cfg_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        read a configuration file line to make the appropriate attribute</span>
<span class="sd">        have the correct values and attributes.</span>
<span class="sd">        </span>
<span class="sd">        porbably should think of a better name for XML_element objects that are</span>
<span class="sd">        attributes of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># split the line by the last =</span>
        <span class="n">line_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_split_cfg_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="c1"># split the keys by . to get the different attributes</span>
        <span class="n">key_list</span> <span class="o">=</span> <span class="n">line_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">line_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">]:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="c1"># loop over the keys to set them appropriately </span>
        <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">key_list</span><span class="p">):</span>
            <span class="c1"># get the name of the key and any attributes it might have</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_cfg_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            
            <span class="c1"># if its the first key, see if its been made an attribute yet</span>
            <span class="k">if</span> <span class="n">ii</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">XML_element</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
                <span class="c1"># for looping purposes we need to get the current XML_element object</span>
                <span class="n">cfg_attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                <span class="c1"># be sure to set any attributes, need to do this here because</span>
                <span class="c1"># the test for hasattr will only make a new one if there</span>
                <span class="c1"># isn&#39;t one already, but since most things in the cfg file</span>
                <span class="c1"># are already attributes of self, they already exist.</span>
                <span class="n">cfg_attr</span><span class="o">.</span><span class="n">_attr</span> <span class="o">=</span> <span class="n">attr</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cfg_attr</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">cfg_attr</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">XML_element</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
                <span class="n">cfg_attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">cfg_attr</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> 
                <span class="n">cfg_attr</span><span class="o">.</span><span class="n">_attr</span> <span class="o">=</span> <span class="n">attr</span>
        
        <span class="c1"># set the value of the current XML_element object</span>
        <span class="n">cfg_attr</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_split_cfg_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        split a cfg line by the last =, otherwise you get strings that are</span>
<span class="sd">        split in the wrong place.  For instance k.l(a=b) = None will be split</span>
<span class="sd">        at [&#39;k.l(a&#39;, &#39;b)&#39;, None] but we want [k.l(a=b), None]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">equal_find</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">line</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">))</span>
        <span class="n">line_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">equal_find</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                     <span class="n">line</span><span class="p">[</span><span class="n">equal_find</span><span class="o">+</span><span class="mi">1</span><span class="p">:]]</span>
                     
        <span class="k">return</span> <span class="n">line_list</span>
        
            
    <span class="k">def</span> <span class="nf">_read_cfg_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        read a key from a cfg file and check to see if has any attributes</span>
<span class="sd">        in the form of:</span>
<span class="sd">            parent.name(attribute=0)(attribute=2) = value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="s1">&#39;(&#39;</span> <span class="ow">and</span> <span class="s1">&#39;)&#39;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
            <span class="n">key_list</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">key_attr</span> <span class="ow">in</span> <span class="n">key_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="n">k_list</span> <span class="o">=</span> <span class="n">key_attr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
                <span class="n">attr</span><span class="p">[</span><span class="n">k_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span> <span class="o">=</span> <span class="n">k_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                
        <span class="k">return</span> <span class="n">key</span><span class="p">,</span> <span class="n">attr</span>
        
<div class="viewcode-block" id="XML_Config.write_cfg_file"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt_xml.XML_Config.write_cfg_file">[docs]</a>    <span class="k">def</span> <span class="nf">write_cfg_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cfg_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write out configuration file in the style of:</span>
<span class="sd">        parent.attribute = value</span>
<span class="sd">        </span>
<span class="sd">        Arguments</span>
<span class="sd">        --------------</span>
<span class="sd">            **cfg_fn** : string</span>
<span class="sd">                         full path to write the configuration file</span>
<span class="sd">                         </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cfg_fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span> <span class="o">=</span> <span class="n">cfg_fn</span>
            
        <span class="c1"># a list of lines that will be joined to write the file</span>
        <span class="n">line_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;# XML Configuration File MTpy&#39;</span><span class="p">]</span>
        
        <span class="c1"># loop over attribute names </span>
        <span class="k">for</span> <span class="n">attr_00_name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="c1"># skip the data attribute cause we don&#39;t need that now</span>
            <span class="k">if</span> <span class="n">attr_00_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Data&#39;</span><span class="p">,</span> <span class="s1">&#39;DataTypes&#39;</span><span class="p">,</span> <span class="s1">&#39;StatisticalEstimates&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
            
            <span class="c1"># get the given attribute</span>
            <span class="n">attr_00</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_00_name</span><span class="p">)</span>
            
            <span class="c1"># make sure it is of XML_element instance</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attr_00</span><span class="p">,</span> <span class="n">XML_element</span><span class="p">):</span>
                <span class="c1"># be sure to add a new line for each parent attribute</span>
                <span class="n">line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="c1"># get the attributes associated with the parent</span>
                <span class="n">attr_00_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_keys</span><span class="p">(</span><span class="n">attr_00</span><span class="p">)</span>
            
                <span class="c1"># if there are no attributes write the line</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attr_00_keys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_write_cfg_line</span><span class="p">(</span><span class="n">attr_00</span><span class="p">))</span>
                
                <span class="c1"># otherwise loop through each attribute checking if there</span>
                <span class="c1"># are more attributes or no</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">attr_01_name</span> <span class="ow">in</span> <span class="n">attr_00_keys</span><span class="p">:</span>
                        <span class="n">attr_01</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">attr_00</span><span class="p">,</span> <span class="n">attr_01_name</span><span class="p">)</span>
                        <span class="n">attr_01_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_keys</span><span class="p">(</span><span class="n">attr_01</span><span class="p">)</span>
                        
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attr_01_keys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_write_cfg_line</span><span class="p">(</span><span class="n">attr_01</span><span class="p">,</span> <span class="n">attr_00</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">attr_02_name</span> <span class="ow">in</span> <span class="n">attr_01_keys</span><span class="p">:</span>
                                <span class="n">attr_02</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">attr_01</span><span class="p">,</span> <span class="n">attr_02_name</span><span class="p">)</span>
                                <span class="n">attr_02_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_keys</span><span class="p">(</span><span class="n">attr_02</span><span class="p">)</span>
                                    
                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attr_02_keys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                    <span class="n">line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_write_cfg_line</span><span class="p">(</span><span class="n">attr_02</span><span class="p">,</span> 
                                                                          <span class="p">[</span><span class="n">attr_00</span><span class="p">,</span> <span class="n">attr_01</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">for</span> <span class="n">attr_03_name</span> <span class="ow">in</span> <span class="n">attr_02_keys</span><span class="p">:</span>
                                        <span class="n">attr_03</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">attr_02</span><span class="p">,</span>
                                                          <span class="n">attr_03_name</span><span class="p">)</span>
                                        <span class="n">attr_03_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_keys</span><span class="p">(</span><span class="n">attr_03</span><span class="p">)</span>
                                        
                                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attr_03_keys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                            <span class="n">line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_write_cfg_line</span><span class="p">(</span><span class="n">attr_03</span><span class="p">,</span> 
                                                                                  <span class="p">[</span><span class="n">attr_00</span><span class="p">,</span> <span class="n">attr_01</span><span class="p">,</span> <span class="n">attr_02</span><span class="p">]))</span>
                                          
                                        <span class="k">else</span><span class="p">:</span>
                                            <span class="k">for</span> <span class="n">attr_04_name</span> <span class="ow">in</span> <span class="n">attr_03_keys</span><span class="p">:</span>
                                                <span class="n">attr_04</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">attr_03</span><span class="p">,</span> <span class="n">attr_04_name</span><span class="p">)</span>
                                                <span class="n">line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_write_cfg_line</span><span class="p">(</span><span class="n">attr_04</span><span class="p">,</span>
                                                                                      <span class="p">[</span><span class="n">attr_00</span><span class="p">,</span> <span class="n">attr_01</span><span class="p">,</span> <span class="n">attr_02</span><span class="p">,</span> <span class="n">attr_03</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s1">&#39;Not including: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">attr_00_name</span><span class="p">)</span>                     

        <span class="c1"># write the file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line_list</span><span class="p">))</span>
            
        <span class="c1"># show the user something happened</span>
        <span class="nb">print</span> <span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">50</span>
        <span class="nb">print</span> <span class="s1">&#39;    Wrote xml configuration file to </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span><span class="p">)</span>
        <span class="nb">print</span> <span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">50</span></div>
        
        

    <span class="k">def</span> <span class="nf">_write_cfg_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">XML_element_obj</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        write a configuration file line in the format of:</span>
<span class="sd">        parent.attribute = value</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        
        <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parent_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">parent_str</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">_name</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parent</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">])</span>
            
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">XML_element</span><span class="p">):</span>
            <span class="n">parent_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parent</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_attr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attr_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;(</span><span class="si">{0}</span><span class="s1">=</span><span class="si">{1}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a_key</span><span class="p">,</span> <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_attr</span><span class="p">[</span><span class="n">a_key</span><span class="p">])</span> 
                                 <span class="k">for</span> <span class="n">a_key</span> <span class="ow">in</span> <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_attr</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">attr_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}{1}{2}</span><span class="s1"> = </span><span class="si">{3}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parent_str</span><span class="p">,</span>
                                        <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> 
                                        <span class="n">attr_str</span><span class="p">,</span> 
                                        <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_value</span><span class="p">)</span>
                                     
    <span class="k">def</span> <span class="nf">_get_attr_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">a_key</span> <span class="k">for</span> <span class="n">a_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> 
                <span class="k">if</span> <span class="n">a_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">]]</span></div>
<span class="c1">#==============================================================================</span>
<span class="c1">#  EDI to XML</span>
<span class="c1">#==============================================================================</span>
<div class="viewcode-block" id="MT_XML"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt_xml.MT_XML">[docs]</a><span class="k">class</span> <span class="nc">MT_XML</span><span class="p">(</span><span class="n">XML_Config</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to read and write MT information from XML format.  This tries to </span>
<span class="sd">    follow the format put forward by Anna Kelbert for archiving MT response </span>
<span class="sd">    data.</span>
<span class="sd">    </span>
<span class="sd">    A configuration file can be read in that might make it easier to write</span>
<span class="sd">    multiple files for the same survey.  </span>
<span class="sd">    </span>
<span class="sd">    .. seealso:: mtpy.core.mt_xml.XML_Config</span>
<span class="sd">   </span>
<span class="sd">    =============== ===========================================================</span>
<span class="sd">    Attributes      Description</span>
<span class="sd">    =============== ===========================================================</span>
<span class="sd">    Z               object of type mtpy.core.z.Z </span>
<span class="sd">    Tipper          object of type mtpy.core.z.Tipper</span>
<span class="sd">    =============== ===========================================================</span>
<span class="sd">   </span>
<span class="sd">    .. note:: All other attributes are of the same name and of type XML_element,</span>
<span class="sd">              where attributes are name, value and attr.  Attr contains any </span>
<span class="sd">              tag information.  This is left this way so that mtpy.core.mt.MT</span>
<span class="sd">              can read in the information.  **Use mtpy.core.mt.MT for </span>
<span class="sd">              conversion between data formats.**</span>
<span class="sd">   </span>
<span class="sd">    =============== ===========================================================</span>
<span class="sd">    Methods         Description</span>
<span class="sd">    =============== =========================================================== </span>
<span class="sd">    read_cfg_file   Read a configuration file in the format of XML_Config</span>
<span class="sd">    read_xml_file   Read an xml file</span>
<span class="sd">    write_xml_file  Write an xml file</span>
<span class="sd">    =============== ===========================================================</span>
<span class="sd">    </span>
<span class="sd">    :Example: ::</span>
<span class="sd">        &gt;&gt;&gt; import mtpy.core.mt_xml as mtxml</span>
<span class="sd">        &gt;&gt;&gt; x = mtxml.read_xml_file(r&quot;/home/mt_data/mt01.xml&quot;)</span>
<span class="sd">        &gt;&gt;&gt; x.read_cfg_file(r&quot;/home/mt_data/survey_xml.cfg&quot;)</span>
<span class="sd">        &gt;&gt;&gt; x.write_xml_file(r&quot;/home/mt_data/xml/mt01.xml&quot;)</span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        
        <span class="n">XML_Config</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edi_fn</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xml_fn</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_element</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span> <span class="o">=</span> <span class="n">mtz</span><span class="o">.</span><span class="n">Z</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span> <span class="o">=</span> <span class="n">mtz</span><span class="o">.</span><span class="n">Tipper</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_order_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;ProductId&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;SubType&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;Notes&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;Tags&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;ExternalUrl&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;PrimaryData&#39;</span><span class="p">,</span>
                            <span class="c1">#&#39;TimeSeriesArchived&#39;,</span>
                            <span class="c1">#&#39;Image&#39;,</span>
                            <span class="c1">#&#39;Original&#39;,</span>
                            <span class="s1">&#39;Attachment&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;Provenance&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;Copyright&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;Site&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;FieldNotes&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;ProcessingInfo&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;StatisticalEstimates&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;DataTypes&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;SiteLayout&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;Data&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;PeriodRange&#39;</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">l</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">meta_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">ll</span> <span class="ow">in</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="n">ll</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
                <span class="n">meta_dict</span><span class="p">[</span><span class="n">ll</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">ll</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">meta_dict</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="k">return</span> <span class="n">name</span><span class="p">,</span> <span class="n">meta_dict</span>
        
    <span class="k">def</span> <span class="nf">_format_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        format the Z and tipper data apporpriately</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># --&gt; useful variables</span>
        <span class="n">comp_dict_z</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):(</span><span class="s1">&#39;Zxx&#39;</span><span class="p">,</span> <span class="s1">&#39;Hx&#39;</span><span class="p">,</span> <span class="s1">&#39;Ex&#39;</span><span class="p">),</span> 
                       <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):(</span><span class="s1">&#39;Zxy&#39;</span><span class="p">,</span> <span class="s1">&#39;Hy&#39;</span><span class="p">,</span> <span class="s1">&#39;Ex&#39;</span><span class="p">),</span> 
                       <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">):(</span><span class="s1">&#39;Zyx&#39;</span><span class="p">,</span> <span class="s1">&#39;Hx&#39;</span><span class="p">,</span> <span class="s1">&#39;Ey&#39;</span><span class="p">),</span>
                       <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):(</span><span class="s1">&#39;Zyy&#39;</span><span class="p">,</span> <span class="s1">&#39;Hy&#39;</span><span class="p">,</span> <span class="s1">&#39;Ey&#39;</span><span class="p">)}</span>
                       
        <span class="n">header_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">header_dict</span><span class="p">[</span><span class="s1">&#39;Z&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;[mV/km]/[nT]&#39;</span><span class="p">,</span> 
                                      <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> 
                                      <span class="s1">&#39;size&#39;</span><span class="p">:</span><span class="s1">&#39;2 2&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">header_dict</span><span class="p">[</span><span class="s1">&#39;Z.VAR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Z.VAR&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;real&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">:</span><span class="s1">&#39;2 2&#39;</span><span class="p">},</span>
                                     <span class="kc">None</span><span class="p">)</span>
        <span class="n">header_dict</span><span class="p">[</span><span class="s1">&#39;Z.INVSIGCOV&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Z.INVSIGCOV&#39;</span><span class="p">,{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> 
                                                                <span class="s1">&#39;size&#39;</span><span class="p">:</span><span class="s1">&#39;2 2&#39;</span><span class="p">},</span> 
                                                 <span class="kc">None</span><span class="p">)</span>
        <span class="n">header_dict</span><span class="p">[</span><span class="s1">&#39;Z.RESIDCOV&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Z.RESIDCOV&#39;</span><span class="p">,{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> 
                                                                <span class="s1">&#39;size&#39;</span><span class="p">:</span><span class="s1">&#39;2 2&#39;</span><span class="p">},</span> 
                                                 <span class="kc">None</span><span class="p">)</span>
        <span class="n">header_dict</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;[]&#39;</span><span class="p">,</span> 
                                       <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span>
                                       <span class="s1">&#39;size&#39;</span><span class="p">:</span><span class="s1">&#39;1 2&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">header_dict</span><span class="p">[</span><span class="s1">&#39;T.VAR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;T.VAR&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;real&#39;</span><span class="p">,</span> 
                                               <span class="s1">&#39;size&#39;</span><span class="p">:</span><span class="s1">&#39;1 2&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">header_dict</span><span class="p">[</span><span class="s1">&#39;T.INVSIGCOV&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;T.INVSIGCOV&#39;</span><span class="p">,{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> 
                                                                <span class="s1">&#39;size&#39;</span><span class="p">:</span><span class="s1">&#39;2 2&#39;</span><span class="p">},</span> 
                                                 <span class="kc">None</span><span class="p">)</span>
        <span class="n">header_dict</span><span class="p">[</span><span class="s1">&#39;T.RESIDCOV&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;T.RESIDCOV&#39;</span><span class="p">,{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> 
                                                                <span class="s1">&#39;size&#39;</span><span class="p">:</span><span class="s1">&#39;1 1&#39;</span><span class="p">},</span> 
                                                 <span class="kc">None</span><span class="p">)</span>
        <span class="n">nf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="o">.</span><span class="n">size</span> 
        
        <span class="c1"># determine whether to write tipper data or not</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">nz_tipper</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">nz_tipper</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">write_tipper</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">write_tipper</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="n">write_tipper</span> <span class="o">=</span> <span class="kc">False</span>
            
        <span class="c1"># set the estimates to write out</span>
        <span class="k">if</span> <span class="n">write_tipper</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">estimates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;Z.VAR&#39;</span><span class="p">,</span> <span class="s1">&#39;Z.INVSIGCOV&#39;</span><span class="p">,</span> <span class="s1">&#39;Z.RESIDCOV&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;T.VAR&#39;</span><span class="p">,</span> <span class="s1">&#39;T.INVSIGCOV&#39;</span><span class="p">,</span> <span class="s1">&#39;T.RESIDCOV&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">estimates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;Z.VAR&#39;</span><span class="p">,</span> <span class="s1">&#39;Z.INVSIGCOV&#39;</span><span class="p">,</span> <span class="s1">&#39;Z.RESIDCOV&#39;</span><span class="p">]</span>

        <span class="c1"># make the data element</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Data</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Data&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">nf</span><span class="p">)},</span> <span class="kc">None</span><span class="p">)</span>  
        
        <span class="c1"># loop through each period and add appropriate information</span>
        <span class="k">for</span> <span class="n">f_index</span><span class="p">,</span> <span class="n">freq</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="p">):</span>
            <span class="n">f_name</span> <span class="o">=</span> <span class="s1">&#39;Period_</span><span class="si">{0:02}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f_index</span><span class="p">)</span>
            <span class="c1"># set attribute period name with the index value</span>
            <span class="c1"># we are setting _name to have the necessary information so</span>
            <span class="c1"># we can name the attribute whatever we want.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Data</span><span class="p">,</span> <span class="n">f_name</span><span class="p">,</span>
                    <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;Period&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.6g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="n">freq</span><span class="p">),</span>
                                     <span class="s1">&#39;units&#39;</span><span class="p">:</span><span class="s1">&#39;seconds&#39;</span><span class="p">},</span> <span class="kc">None</span><span class="p">))</span>
            <span class="n">d_attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Data</span><span class="p">,</span> <span class="n">f_name</span><span class="p">)</span>
            <span class="c1"># Get information from data</span>
            <span class="k">for</span> <span class="n">estimate</span> <span class="ow">in</span> <span class="n">estimates</span><span class="p">:</span>
                <span class="n">attr_name</span> <span class="o">=</span> <span class="n">estimate</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;VAR&#39;</span><span class="p">,</span> <span class="s1">&#39;err&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="n">estimate_name</span> <span class="o">=</span> <span class="n">estimate</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="c1"># need to make sure the attribute value is a copy otherwise it</span>
                <span class="c1"># will continue to rewrite itself.</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">d_attr</span><span class="p">,</span> <span class="n">estimate_name</span><span class="p">,</span>
                        <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">header_dict</span><span class="p">[</span><span class="n">estimate</span><span class="p">]))</span>
                <span class="n">c_attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">d_attr</span><span class="p">,</span> <span class="n">estimate_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="s1">&#39;z&#39;</span> <span class="ow">in</span> <span class="n">attr_name</span><span class="p">:</span>
                    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">z_arr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                        <span class="c1">#print &#39;No {0} information&#39;.format(attr_name)</span>
                        <span class="k">continue</span>
                    <span class="k">for</span> <span class="n">e_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">h_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                            <span class="n">c</span> <span class="o">=</span> <span class="n">comp_dict_z</span><span class="p">[(</span><span class="n">e_index</span><span class="p">,</span> <span class="n">h_index</span><span class="p">)]</span>
                            <span class="n">c_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;input&#39;</span><span class="p">:</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;output&#39;</span><span class="p">:</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span>
                            <span class="n">z_value</span> <span class="o">=</span> <span class="n">z_arr</span><span class="p">[</span><span class="n">f_index</span><span class="p">,</span> <span class="n">e_index</span><span class="p">,</span> <span class="n">h_index</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">attr_name</span> <span class="o">==</span> <span class="s1">&#39;z_err&#39;</span><span class="p">:</span>
                                <span class="n">c_value</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:&lt;+.6e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">z_value</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">c_value</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:&lt;+.6e}</span><span class="s1"> </span><span class="si">{1:&lt;+.6e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">z_value</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> 
                                                                       <span class="n">z_value</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
                            
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">c_attr</span><span class="p">,</span> 
                                    <span class="s1">&#39;value_</span><span class="si">{0:02}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">),</span>
                                    <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">c_dict</span><span class="p">,</span> <span class="n">c_value</span><span class="p">))</span> 

                            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                            
                <span class="k">if</span> <span class="s1">&#39;t&#39;</span> <span class="ow">in</span> <span class="n">attr_name</span> <span class="ow">and</span> <span class="n">write_tipper</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">attr_name</span> <span class="o">=</span> <span class="n">attr_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;tipper&#39;</span><span class="p">)</span>
                    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">if</span> <span class="n">attr_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;tipper&#39;</span><span class="p">,</span> <span class="s1">&#39;tipper_err&#39;</span><span class="p">]:</span>
                        <span class="n">tx</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="n">ty</span> <span class="o">=</span> <span class="mi">2</span>
                        <span class="n">comp_dict_t</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):(</span><span class="s1">&#39;Tx&#39;</span><span class="p">,</span> <span class="s1">&#39;Hx&#39;</span><span class="p">,</span> <span class="s1">&#39;Hz&#39;</span><span class="p">),</span>
                                       <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):(</span><span class="s1">&#39;Ty&#39;</span><span class="p">,</span> <span class="s1">&#39;Hy&#39;</span><span class="p">,</span> <span class="s1">&#39;Hz&#39;</span><span class="p">)}</span>
                    <span class="k">elif</span> <span class="n">attr_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;tipper_invsigcov&#39;</span><span class="p">:</span>
                        <span class="n">tx</span> <span class="o">=</span> <span class="mi">2</span>
                        <span class="n">ty</span> <span class="o">=</span> <span class="mi">2</span>
                        <span class="n">comp_dict_t</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Hx&#39;</span><span class="p">,</span> <span class="s1">&#39;Hx&#39;</span><span class="p">),</span>
                                       <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Hx&#39;</span><span class="p">,</span> <span class="s1">&#39;Hy&#39;</span><span class="p">),</span>
                                       <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">):(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Hy&#39;</span><span class="p">,</span> <span class="s1">&#39;Hx&#39;</span><span class="p">),</span>
                                       <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Hy&#39;</span><span class="p">,</span> <span class="s1">&#39;Hy&#39;</span><span class="p">)}</span>
                    <span class="k">elif</span> <span class="n">attr_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;tipper_residcov&#39;</span><span class="p">:</span>
                        <span class="n">tx</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="n">ty</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="n">comp_dict_t</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Hz&#39;</span><span class="p">,</span> <span class="s1">&#39;Hz&#39;</span><span class="p">)}</span>
                        
                    <span class="k">for</span> <span class="n">e_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">tx</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">h_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ty</span><span class="p">):</span>
                            <span class="n">c</span> <span class="o">=</span> <span class="n">comp_dict_t</span><span class="p">[(</span><span class="n">e_index</span><span class="p">,</span> <span class="n">h_index</span><span class="p">)]</span>
                            <span class="n">c_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;input&#39;</span><span class="p">:</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;output&#39;</span><span class="p">:</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">t_arr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
                            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                                <span class="k">continue</span>
                            <span class="n">t_value</span> <span class="o">=</span> <span class="n">t_arr</span><span class="p">[</span><span class="n">f_index</span><span class="p">,</span> <span class="n">e_index</span><span class="p">,</span> <span class="n">h_index</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">attr_name</span> <span class="o">==</span>  <span class="s1">&#39;tipper_err&#39;</span><span class="p">:</span> 
                                <span class="n">c_value</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:&lt;+.6e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t_value</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">c_value</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:&lt;+.6e}</span><span class="s1"> </span><span class="si">{1:&lt;+.6e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t_value</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> 
                                                                       <span class="n">t_value</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
                             
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">c_attr</span><span class="p">,</span> 
                                    <span class="s1">&#39;value_</span><span class="si">{0:02}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">),</span>
                                    <span class="n">XML_element</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">c_dict</span><span class="p">,</span> <span class="n">c_value</span><span class="p">))</span> 
                            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                            
        <span class="bp">self</span><span class="o">.</span><span class="n">PeriodRange</span><span class="o">.</span><span class="n">_attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.6e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="o">.</span><span class="n">min</span><span class="p">()),</span>
                                  <span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.6e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="o">.</span><span class="n">max</span><span class="p">())}</span>
        
    <span class="k">def</span> <span class="nf">_write_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent_et</span><span class="p">,</span> <span class="n">XML_element_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        make a new element </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_attr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_attr</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_attr</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_attr</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_attr</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
<span class="c1">#        if XML_element_obj._name is None:</span>
<span class="c1">#            XML_element_obj._name = &#39;None&#39;</span>
<span class="c1">#        if XML_element_obj._value is None:</span>
<span class="c1">#            XML_element_obj.value = &#39;None&#39;</span>
            
        <span class="n">new_element</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent_et</span><span class="p">,</span> 
                                    <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span>
                                    <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_attr</span><span class="p">)</span>
        <span class="n">new_element</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">XML_element_obj</span><span class="o">.</span><span class="n">_value</span>
        <span class="c1">#new_element.tail = &#39;\n&#39;</span>
        <span class="k">return</span> <span class="n">new_element</span>

<div class="viewcode-block" id="MT_XML.write_xml_file"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt_xml.MT_XML.write_xml_file">[docs]</a>    <span class="k">def</span> <span class="nf">write_xml_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_fn</span><span class="p">,</span> <span class="n">cfg_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        write xml from edi</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cfg_fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cfg_fn</span> <span class="o">=</span> <span class="n">cfg_fn</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">read_cfg_file</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">xml_fn</span> <span class="o">=</span> <span class="n">xml_fn</span>

        <span class="c1"># get data inot xml format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_format_data</span><span class="p">()</span>

        <span class="c1"># make the top of the tree element        </span>
        <span class="n">emtf</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s1">&#39;EM_TF&#39;</span><span class="p">)</span>
        
        <span class="c1"># loop over the important information sections</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order_list</span><span class="p">:</span>
            <span class="c1"># get the information for the given element</span>
            <span class="n">d_00_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
            
            <span class="n">element_00</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_element</span><span class="p">(</span><span class="n">emtf</span><span class="p">,</span> <span class="n">d_00_obj</span><span class="p">)</span>

            <span class="n">key_00_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_keys</span><span class="p">(</span><span class="n">d_00_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_00_list</span><span class="p">)</span> <span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key_00</span> <span class="ow">in</span> <span class="n">key_00_list</span><span class="p">:</span>
                    <span class="n">d_01_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">d_00_obj</span><span class="p">,</span> <span class="n">key_00</span><span class="p">)</span>
                    <span class="n">element_01</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_element</span><span class="p">(</span><span class="n">element_00</span><span class="p">,</span> <span class="n">d_01_obj</span><span class="p">)</span>
                    
                    <span class="n">key_01_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_keys</span><span class="p">(</span><span class="n">d_01_obj</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_01_list</span><span class="p">)</span> <span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">key_01</span> <span class="ow">in</span> <span class="n">key_01_list</span><span class="p">:</span>
                            <span class="n">d_02_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">d_01_obj</span><span class="p">,</span> <span class="n">key_01</span><span class="p">)</span>
                            <span class="n">element_02</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_element</span><span class="p">(</span><span class="n">element_01</span><span class="p">,</span> <span class="n">d_02_obj</span><span class="p">)</span>
                            
                            <span class="n">key_02_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_keys</span><span class="p">(</span><span class="n">d_02_obj</span><span class="p">)</span>
                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_02_list</span><span class="p">)</span> <span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                                <span class="k">for</span> <span class="n">key_02</span> <span class="ow">in</span> <span class="n">key_02_list</span><span class="p">:</span>
                                    <span class="n">d_03_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">d_02_obj</span><span class="p">,</span> <span class="n">key_02</span><span class="p">)</span>
                                    <span class="n">element_03</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_element</span><span class="p">(</span><span class="n">element_02</span><span class="p">,</span> <span class="n">d_03_obj</span><span class="p">)</span>
                                    
                                    <span class="n">key_03_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_keys</span><span class="p">(</span><span class="n">d_03_obj</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_03_list</span><span class="p">)</span> <span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                                        <span class="k">for</span> <span class="n">key_03</span> <span class="ow">in</span> <span class="n">key_03_list</span><span class="p">:</span>
                                            <span class="n">d_04_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">d_03_obj</span><span class="p">,</span> <span class="n">key_03</span><span class="p">)</span>
                                            <span class="n">element_04</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_element</span><span class="p">(</span><span class="n">element_03</span><span class="p">,</span> <span class="n">d_04_obj</span><span class="p">)</span>
                                    
                                            <span class="n">key_04_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_keys</span><span class="p">(</span><span class="n">d_04_obj</span><span class="p">)</span>
                                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_04_list</span><span class="p">)</span> <span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                                                <span class="k">for</span> <span class="n">key_04</span> <span class="ow">in</span> <span class="n">key_04_list</span><span class="p">:</span>
                                                    <span class="n">d_05_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">d_04_obj</span><span class="p">,</span> <span class="n">key_04</span><span class="p">)</span>
                                                    <span class="n">element_05</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_element</span><span class="p">(</span><span class="n">element_04</span><span class="p">,</span> <span class="n">d_05_obj</span><span class="p">)</span>         
  
        <span class="c1">#--&gt; write xml file</span>
        <span class="n">xmlstr</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">ET</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">emtf</span><span class="p">))</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="s2">&quot;   &quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_fn</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">xmlstr</span><span class="p">)</span>
        
        <span class="nb">print</span> <span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">72</span>
        <span class="nb">print</span> <span class="s1">&#39;    Wrote xml file to: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_fn</span><span class="p">)</span>
        <span class="nb">print</span> <span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">72</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml_fn</span></div>
       
<div class="viewcode-block" id="MT_XML.read_xml_file"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt_xml.MT_XML.read_xml_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_xml_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_fn</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        read in an xml file and set attributes appropriately.</span>
<span class="sd">        </span>
<span class="sd">        Arguments</span>
<span class="sd">        --------------</span>
<span class="sd">            **xml_fn** : string</span>
<span class="sd">                         full path of xml file to read in</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">xml_fn</span> <span class="o">=</span> <span class="n">xml_fn</span>
        
        <span class="n">et_xml</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">xml_fn</span><span class="p">)</span>

        <span class="n">root</span> <span class="o">=</span> <span class="n">et_xml</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">element_00</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">getchildren</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element_00</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_element</span><span class="p">(</span><span class="n">element_00</span><span class="p">))</span>
            
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="p">,</span>
                    <span class="s1">&#39;DataQualityNotes&#39;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">DataQualityNotes</span><span class="p">)</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="p">,</span> <span class="s1">&#39;DataQualityNotes&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="p">,</span>
                    <span class="s1">&#39;DataQualityWarnings&#39;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">DataQualityWarnings</span><span class="p">)</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="p">,</span> <span class="s1">&#39;DataQualityWarnings&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
            
        <span class="c1"># set Z and Tipper</span>
        <span class="n">nf</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">])</span>
        <span class="n">period</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nf</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nf</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">complex</span><span class="p">)</span>
        <span class="n">z_err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nf</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span> <span class="o">=</span> <span class="n">mtz</span><span class="o">.</span><span class="n">Z</span><span class="p">(</span><span class="n">z_array</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">z_err_array</span><span class="o">=</span><span class="n">z_err</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">period</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span><span class="o">.</span><span class="n">z_invsigcov</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nf</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">complex</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span><span class="o">.</span><span class="n">z_residcov</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nf</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">complex</span><span class="p">)</span>
        
        <span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hx&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;hy&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ex&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ey&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">output_dict</span> <span class="o">=</span> <span class="n">input_dict</span>
        
        <span class="n">p_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">per_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Data</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;period&#39;</span> <span class="ow">in</span> <span class="n">per_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">p_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Data</span><span class="p">,</span> <span class="n">per_attr</span><span class="p">)</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="mf">1.</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">p_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span><span class="o">.</span><span class="n">freq</span><span class="p">[</span><span class="n">p_count</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span><span class="o">/</span><span class="n">p1</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">):</span>
                    <span class="n">z_block</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">z_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">z_block</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s1">&#39;value_&#39;</span> <span class="ow">in</span> <span class="n">z_attr</span><span class="p">:</span>
                            <span class="n">z_comp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">z_block</span><span class="p">,</span> <span class="n">z_attr</span><span class="p">)</span>
                            <span class="n">ii</span> <span class="o">=</span> <span class="n">output_dict</span><span class="p">[</span><span class="n">z_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">jj</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">z_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">z_value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">zz</span><span class="p">)</span> <span class="k">for</span> <span class="n">zz</span> <span class="ow">in</span> <span class="n">z_comp</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
                            <span class="n">z_value</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">z_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">z_value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span><span class="o">.</span><span class="n">z</span><span class="p">[</span><span class="n">p_count</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_value</span>
                
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;ZVAR&#39;</span><span class="p">):</span>
                    <span class="n">z_block</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;ZVAR&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">z_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">z_block</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s1">&#39;value_&#39;</span> <span class="ow">in</span> <span class="n">z_attr</span><span class="p">:</span>
                            <span class="n">z_comp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">z_block</span><span class="p">,</span> <span class="n">z_attr</span><span class="p">)</span>
                            <span class="n">ii</span> <span class="o">=</span> <span class="n">output_dict</span><span class="p">[</span><span class="n">z_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">jj</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">z_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">z_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">z_comp</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span><span class="o">.</span><span class="n">z_err</span><span class="p">[</span><span class="n">p_count</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_value</span>
                
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;ZINVSIGCOV&#39;</span><span class="p">):</span>
                    <span class="n">z_block</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;ZINVSIGCOV&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">z_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">z_block</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s1">&#39;value_&#39;</span> <span class="ow">in</span> <span class="n">z_attr</span><span class="p">:</span>
                            <span class="n">z_comp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">z_block</span><span class="p">,</span> <span class="n">z_attr</span><span class="p">)</span>
                            <span class="n">ii</span> <span class="o">=</span> <span class="n">output_dict</span><span class="p">[</span><span class="n">z_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">jj</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">z_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">z_value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">zz</span><span class="p">)</span> <span class="k">for</span> <span class="n">zz</span> <span class="ow">in</span> <span class="n">z_comp</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
                            <span class="n">z_value</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">z_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">z_value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span><span class="o">.</span><span class="n">z_invsigcov</span><span class="p">[</span><span class="n">p_count</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_value</span>
                            
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;ZRESIDCOV&#39;</span><span class="p">):</span>
                    <span class="n">z_block</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;ZRESIDCOV&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">z_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">z_block</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s1">&#39;value_&#39;</span> <span class="ow">in</span> <span class="n">z_attr</span><span class="p">:</span>
                            <span class="n">z_comp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">z_block</span><span class="p">,</span> <span class="n">z_attr</span><span class="p">)</span>
                            <span class="n">ii</span> <span class="o">=</span> <span class="n">output_dict</span><span class="p">[</span><span class="n">z_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">jj</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">z_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">z_value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">zz</span><span class="p">)</span> <span class="k">for</span> <span class="n">zz</span> <span class="ow">in</span> <span class="n">z_comp</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
                            <span class="n">z_value</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">z_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">z_value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span><span class="o">.</span><span class="n">z_residcov</span><span class="p">[</span><span class="n">p_count</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_value</span>
                <span class="n">p_count</span> <span class="o">+=</span> <span class="mi">1</span>
                
        <span class="c1"># Fill Tipper</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">complex</span><span class="p">)</span>
        <span class="n">t_err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span> 
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span> <span class="o">=</span> <span class="n">mtz</span><span class="o">.</span><span class="n">Tipper</span><span class="p">(</span><span class="n">tipper_array</span><span class="o">=</span><span class="n">t</span><span class="p">,</span> <span class="n">tipper_err_array</span><span class="o">=</span><span class="n">t_err</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">period</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">tipper_invsigcov</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nf</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">complex</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">tipper_residcov</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">complex</span><span class="p">)</span>
        
        <span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hz&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;hx&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;hy&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="n">output_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hz&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;hx&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;hy&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span>
        
        <span class="n">p_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">per_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Data</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;period&#39;</span> <span class="ow">in</span> <span class="n">per_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">p_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Data</span><span class="p">,</span> <span class="n">per_attr</span><span class="p">)</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">p_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">freq</span><span class="p">[</span><span class="n">p_count</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span><span class="o">/</span><span class="n">p1</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">):</span>
                    <span class="n">t_block</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">t_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">t_block</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s1">&#39;value_&#39;</span> <span class="ow">in</span> <span class="n">t_attr</span><span class="p">:</span>
                            <span class="n">t_comp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">t_block</span><span class="p">,</span> <span class="n">t_attr</span><span class="p">)</span>
                            <span class="n">ii</span> <span class="o">=</span> <span class="n">output_dict</span><span class="p">[</span><span class="n">t_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">jj</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">t_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">t_value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span> <span class="k">for</span> <span class="n">tt</span> <span class="ow">in</span> <span class="n">t_comp</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
                            <span class="n">t_value</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">t_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">t_value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">tipper</span><span class="p">[</span><span class="n">p_count</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">t_value</span>
                
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;TVAR&#39;</span><span class="p">):</span>
                    <span class="n">t_block</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;TVAR&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">t_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">t_block</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s1">&#39;value_&#39;</span> <span class="ow">in</span> <span class="n">t_attr</span><span class="p">:</span>
                            <span class="n">t_comp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">t_block</span><span class="p">,</span> <span class="n">t_attr</span><span class="p">)</span>
                            <span class="n">ii</span> <span class="o">=</span> <span class="n">output_dict</span><span class="p">[</span><span class="n">t_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">jj</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">t_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">t_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">t_comp</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">tipper_err</span><span class="p">[</span><span class="n">p_count</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">t_value</span>
                
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;TINVSIGCOV&#39;</span><span class="p">):</span>
                    <span class="n">t_block</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;TINVSIGCOV&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">t_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">t_block</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s1">&#39;value_&#39;</span> <span class="ow">in</span> <span class="n">t_attr</span><span class="p">:</span>
                            <span class="n">t_comp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">t_block</span><span class="p">,</span> <span class="n">t_attr</span><span class="p">)</span>
                            <span class="n">ii</span> <span class="o">=</span> <span class="n">output_dict</span><span class="p">[</span><span class="n">t_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">jj</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">t_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">t_value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span> <span class="k">for</span> <span class="n">tt</span> <span class="ow">in</span> <span class="n">t_comp</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
                            <span class="n">t_value</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">t_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">t_value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">tipper_invsigcov</span><span class="p">[</span><span class="n">p_count</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">t_value</span>

                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;TRESIDCOV&#39;</span><span class="p">):</span>
                    <span class="n">t_block</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">p_obj</span><span class="p">,</span> <span class="s1">&#39;TRESIDCOV&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">t_attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">t_block</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s1">&#39;value_&#39;</span> <span class="ow">in</span> <span class="n">t_attr</span><span class="p">:</span>
                            <span class="n">t_comp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">t_block</span><span class="p">,</span> <span class="n">t_attr</span><span class="p">)</span>
                            <span class="n">ii</span> <span class="o">=</span> <span class="n">output_dict</span><span class="p">[</span><span class="n">t_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">jj</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">t_comp</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                            <span class="n">t_value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span> <span class="k">for</span> <span class="n">tt</span> <span class="ow">in</span> <span class="n">t_comp</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
                            <span class="n">t_value</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">t_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">t_value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">tipper_residcov</span><span class="p">[</span><span class="n">p_count</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">t_value</span>

                <span class="n">p_count</span> <span class="o">+=</span> <span class="mi">1</span></div>
            
    <span class="k">def</span> <span class="nf">_get_info_from_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get information from an element, including name, attr, value</span>
<span class="sd">        </span>
<span class="sd">        Arguments</span>
<span class="sd">        ------------</span>
<span class="sd">            **element** : ET.Element</span>
<span class="sd">            </span>
<span class="sd">        Returns</span>
<span class="sd">        ---------</span>
<span class="sd">            **XML_element** XML_element Object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">return_obj</span> <span class="o">=</span> <span class="n">XML_element</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">return_obj</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">return_obj</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">return_obj</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">return_obj</span><span class="o">.</span><span class="n">_attr</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span>
        
        <span class="k">return</span> <span class="n">return_obj</span>
        
    <span class="k">def</span> <span class="nf">_get_attr_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        make attribute name, if one already exists, then add a number to it</span>
<span class="sd">        </span>
<span class="sd">        ex. attribute_01</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attr_name</span> <span class="o">=</span> <span class="n">attr_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">attr_name</span> <span class="o">==</span> <span class="s1">&#39;Period&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s1">&#39;Period_00&#39;</span><span class="p">):</span>
                <span class="k">return</span> <span class="s1">&#39;Period_00&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
                    <span class="n">new_attr_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">_</span><span class="si">{1:02}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">ii</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">new_attr_name</span><span class="p">):</span>
                        <span class="k">break</span>
                <span class="k">return</span> <span class="n">new_attr_name</span>
            
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
                <span class="n">new_attr_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">_</span><span class="si">{1:02}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">ii</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">new_attr_name</span><span class="p">):</span>
                    <span class="k">break</span>
    
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_attr_name</span> <span class="o">=</span> <span class="n">attr_name</span>
        
        <span class="k">return</span> <span class="n">new_attr_name</span>
        
    <span class="k">def</span> <span class="nf">_read_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        read a given element and return something useful</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_info_from_element</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        
        <span class="n">children</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">children</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child_00</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
                <span class="n">attr_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_name</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">child_00</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_info_from_element</span><span class="p">(</span><span class="n">child_00</span><span class="p">))</span>
                
                <span class="n">children_01</span> <span class="o">=</span> <span class="n">child_00</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">children_01</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">parent_01</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">child_01</span> <span class="ow">in</span> <span class="n">children_01</span><span class="p">:</span>
                        <span class="n">attr_01_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_name</span><span class="p">(</span><span class="n">parent_01</span><span class="p">,</span>
                                                     <span class="n">child_01</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
                                                     
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">parent_01</span><span class="p">,</span> 
                                <span class="n">attr_01_name</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_get_info_from_element</span><span class="p">(</span><span class="n">child_01</span><span class="p">))</span>
                                
                        <span class="n">children_02</span> <span class="o">=</span> <span class="n">child_01</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">children_02</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">parent_02</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parent_01</span><span class="p">,</span> <span class="n">attr_01_name</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">child_02</span> <span class="ow">in</span> <span class="n">children_02</span><span class="p">:</span>
                                <span class="n">attr_02_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_name</span><span class="p">(</span><span class="n">parent_02</span><span class="p">,</span> 
                                                             <span class="n">child_02</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
                                                             
                                <span class="nb">setattr</span><span class="p">(</span><span class="n">parent_02</span><span class="p">,</span>
                                        <span class="n">attr_02_name</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">_get_info_from_element</span><span class="p">(</span><span class="n">child_02</span><span class="p">))</span>
                                        
                                <span class="n">children_03</span> <span class="o">=</span> <span class="n">child_02</span><span class="o">.</span><span class="n">getchildren</span><span class="p">()</span>
                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">children_03</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                    <span class="n">parent_03</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parent_02</span><span class="p">,</span> <span class="n">attr_02_name</span><span class="p">)</span>
                                    <span class="k">for</span> <span class="n">child_03</span> <span class="ow">in</span> <span class="n">children_03</span><span class="p">:</span>
                                        <span class="n">attr_03_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_attr_name</span><span class="p">(</span><span class="n">parent_03</span><span class="p">,</span> 
                                                                     <span class="n">child_03</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
                                                                     
                                        <span class="nb">setattr</span><span class="p">(</span><span class="n">parent_03</span><span class="p">,</span>
                                                <span class="n">attr_03_name</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">_get_info_from_element</span><span class="p">(</span><span class="n">child_03</span><span class="p">))</span>
                        
        
        <span class="k">return</span> <span class="n">child</span> 
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Z</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get z information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span>
                 
    <span class="nd">@Z</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">Z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z_object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set z object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">z_object</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">mtz</span><span class="o">.</span><span class="n">Z</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MT_XML_Error</span><span class="p">(</span><span class="s1">&#39;To set Z, input needs to be an mtpy.core.z.Z object&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span> <span class="o">=</span> <span class="n">z_object</span>
        
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Tipper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get Tipper information</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span>
                    
    <span class="nd">@Tipper</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">Tipper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set z object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">t_object</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">mtz</span><span class="o">.</span><span class="n">Tipper</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MT_XML_Error</span><span class="p">(</span><span class="s1">&#39;To set Z, input needs to be an mtpy.core.z.Z object&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span> <span class="o">=</span> <span class="n">t_object</span></div>

<span class="c1">#==============================================================================</span>
<span class="c1"># exceptions</span>
<span class="c1">#==============================================================================</span>
<div class="viewcode-block" id="MT_XML_Error"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt_xml.MT_XML_Error">[docs]</a><span class="k">class</span> <span class="nc">MT_XML_Error</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../master_doc.html">mtpy 1.01.01 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Geoscience Australia.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.2.
    </div>
  </body>
</html>