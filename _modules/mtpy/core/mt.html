
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>mtpy.core.mt &#8212; mtpy 1.01.01 documentation</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../master_doc.html">mtpy 1.01.01 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for mtpy.core.mt</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">.. module:: MT</span>
<span class="sd">   :synopsis: The main container for MT response functions.</span>

<span class="sd">.. moduleauthor:: Jared Peacock &lt;jpeacock@usgs.gov&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># ==============================================================================</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">import</span> <span class="nn">mtpy.core.edi</span> <span class="k">as</span> <span class="nn">MTedi</span>
<span class="kn">import</span> <span class="nn">mtpy.core.z</span> <span class="k">as</span> <span class="nn">MTz</span>
<span class="kn">import</span> <span class="nn">mtpy.utils.gis_tools</span> <span class="k">as</span> <span class="nn">gis_tools</span>
<span class="kn">import</span> <span class="nn">mtpy.analysis.pt</span> <span class="k">as</span> <span class="nn">MTpt</span>
<span class="kn">import</span> <span class="nn">mtpy.analysis.distortion</span> <span class="k">as</span> <span class="nn">MTdistortion</span>
<span class="kn">import</span> <span class="nn">mtpy.core.jfile</span> <span class="k">as</span> <span class="nn">MTj</span>
<span class="kn">import</span> <span class="nn">mtpy.core.mt_xml</span> <span class="k">as</span> <span class="nn">MTxml</span>

<span class="kn">from</span> <span class="nn">mtpy.utils.mtpylog</span> <span class="k">import</span> <span class="n">MtPyLog</span>

<span class="n">_logger</span> <span class="o">=</span> <span class="n">MtPyLog</span><span class="o">.</span><span class="n">get_mtpy_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="c1"># _logger.setLevel(logging.DEBUG)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">scipy</span>

    <span class="n">scipy_version</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span> <span class="k">for</span> <span class="n">ss</span> <span class="ow">in</span> <span class="n">scipy</span><span class="o">.</span><span class="n">__version__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)]</span>
    <span class="k">if</span> <span class="n">scipy_version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">scipy_version</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">14</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Note: need scipy version 0.14.0 or higher or interpolation &#39;</span>
                          <span class="s1">&#39;might not work.&#39;</span><span class="p">,</span> <span class="ne">ImportWarning</span><span class="p">)</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Note: need scipy version 0.14.0 or higher or interpolation &#39;</span>
                            <span class="s1">&#39;might not work.&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">scipy.interpolate</span> <span class="k">as</span> <span class="nn">spi</span>

    <span class="n">interp_import</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Could not find scipy.interpolate, cannot use method interpolate&#39;</span>
                  <span class="s1">&#39;check installation you can get scipy from scipy.org.&#39;</span><span class="p">)</span>
    <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Could not find scipy.interpolate, cannot use method interpolate&#39;</span>
                    <span class="s1">&#39;check installation you can get scipy from scipy.org.&#39;</span><span class="p">)</span>
    <span class="n">interp_import</span> <span class="o">=</span> <span class="kc">False</span>


<span class="c1"># =============================================================================</span>
<div class="viewcode-block" id="MT"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT">[docs]</a><span class="k">class</span> <span class="nc">MT</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Basic MT container to hold all information necessary for a MT station</span>
<span class="sd">    including the following parameters.</span>

<span class="sd">        * Site --&gt; information on site details (lat, lon, name, etc)</span>
<span class="sd">        * FieldNotes --&gt; information on instruments, setup, etc.</span>
<span class="sd">        * Copyright --&gt; information on how the data can be used and citations</span>
<span class="sd">        * Provenance --&gt; where the data come from and how they are stored</span>
<span class="sd">        * Processing --&gt; how the data were processed.</span>

<span class="sd">    The most used attributes are made available from MT, namely the following.</span>

<span class="sd">    ===================== =====================================================</span>
<span class="sd">    Attribute             Description</span>
<span class="sd">    ===================== =====================================================</span>
<span class="sd">    station               station name</span>
<span class="sd">    lat                   station latitude in decimal degrees</span>
<span class="sd">    lon                   station longitude in decimal degrees</span>
<span class="sd">    elev                  station elevation in meters</span>
<span class="sd">    Z                     mtpy.core.z.Z object for impedance tensor</span>
<span class="sd">    Tipper                mtpy.core.z.Tipper object for tipper</span>
<span class="sd">    pt                    mtpy.analysis.pt.PhaseTensor for phase tensor</span>
<span class="sd">    east                  station location in UTM coordinates assuming WGS-84</span>
<span class="sd">    north                 station location in UTM coordinates assuming WGS-84</span>
<span class="sd">    utm_zone              zone of UTM coordinates assuming WGS-84</span>
<span class="sd">    rotation_angle        rotation angle of the data</span>
<span class="sd">    fn                    absolute path to the data file</span>
<span class="sd">    ===================== =====================================================</span>

<span class="sd">    Other information is contained with in the different class attributes. For</span>
<span class="sd">    instance survey name is in MT.Site.survey</span>

<span class="sd">    .. note::</span>

<span class="sd">        * The best way to see what all the information is and where it is</span>
<span class="sd">          contained would be to write out a configuration file ::</span>

<span class="sd">              &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">              &gt;&gt;&gt; mt_obj = mt.MT()</span>
<span class="sd">              &gt;&gt;&gt; mt_obj.write_cfg_file(r&quot;/home/mt/generic.cfg&quot;)</span>

<span class="sd">        * Currently EDI, XML, and j file are supported to read in information,</span>
<span class="sd">          and can write out EDI and XML formats.  Will be extending to j and</span>
<span class="sd">          Egberts Z format.</span>

<span class="sd">    ===================== =====================================================</span>
<span class="sd">    Methods               Description</span>
<span class="sd">    ===================== =====================================================</span>
<span class="sd">    read_mt_file          read in a MT file [ EDI | XML | j ]</span>
<span class="sd">    write_mt_file         write a MT file [ EDI | XML ]</span>
<span class="sd">    read_cfg_file         read a configuration file</span>
<span class="sd">    write_cfg_file        write a configuration file</span>
<span class="sd">    remove_distortion     remove distortion  following Bibby et al. [2005]</span>
<span class="sd">    remove_static_shift   Shifts apparent resistivity curves up or down</span>
<span class="sd">    interpolate           interpolates Z and T onto specified frequency array.</span>
<span class="sd">    ===================== =====================================================</span>


<span class="sd">    Examples</span>
<span class="sd">    -------------------</span>
<span class="sd">    :Read from an .edi File: ::</span>

<span class="sd">        &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">        &gt;&gt;&gt; mt_obj = mt.MT(r&quot;/home/edi_files/s01.edi&quot;)</span>

<span class="sd">    :Remove Distortion: ::</span>

<span class="sd">        &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">        &gt;&gt;&gt; mt1 = mt.MT(fn=r&quot;/home/mt/edi_files/mt01.edi&quot;)</span>
<span class="sd">        &gt;&gt;&gt; D, new_z = mt1.remove_distortion()</span>
<span class="sd">        &gt;&gt;&gt; mt1.write_mt_file(new_fn=r&quot;/home/mt/edi_files/mt01_dr.edi&quot;,\</span>
<span class="sd">        &gt;&gt;&gt;                    new_Z=new_z)</span>

<span class="sd">    :Remove Static Shift: ::</span>

<span class="sd">        &gt;&gt;&gt; new_z_obj = mt_obj.remove_static_shift(ss_x=.78, ss_y=1.1)</span>
<span class="sd">        &gt;&gt;&gt; # write a new edi file</span>
<span class="sd">        &gt;&gt;&gt; mt_obj.write_mt_file(new_fn=r&quot;/home/edi_files/s01_ss.edi&quot;,</span>
<span class="sd">        &gt;&gt;&gt;                       new_Z=new_z)</span>
<span class="sd">        &gt;&gt;&gt; wrote file to: /home/edi_files/s01_ss.edi</span>

<span class="sd">    :Interpolate: ::</span>

<span class="sd">        &gt;&gt;&gt; new_freq = np.logspace(-3, 3, num=24)</span>
<span class="sd">        &gt;&gt;&gt; new_z_obj, new_tipper_obj = mt_obj.interpolate(new_freq)</span>
<span class="sd">        &gt;&gt;&gt; mt_obj.write_mt_file(new_Z=new_z_obj, new_Tipper=new_tipper_obj)</span>
<span class="sd">        &gt;&gt;&gt; wrote file to: /home/edi_files/s01_RW.edi</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logging</span> <span class="o">=</span> <span class="n">MtPyLog</span><span class="o">.</span><span class="n">get_mtpy_logger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="c1"># important information held in objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span> <span class="o">=</span> <span class="n">Site</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span> <span class="o">=</span> <span class="n">FieldNotes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span> <span class="o">=</span> <span class="n">Provenance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">Information</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span> <span class="o">=</span> <span class="n">Processing</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span> <span class="o">=</span> <span class="n">Copyright</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span> <span class="o">=</span> <span class="n">MTz</span><span class="o">.</span><span class="n">Z</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span> <span class="o">=</span> <span class="n">MTz</span><span class="o">.</span><span class="n">Tipper</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rotation_angle</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">original_file_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">read_mt_file</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">fn</span><span class="p">))</span>  <span class="c1"># store file reference</span>

        <span class="c1"># provide key words to fill values if an edi file does not exist</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

    <span class="c1"># ==========================================================================</span>
    <span class="c1"># get functions</span>
    <span class="c1"># ==========================================================================</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; reference to original data file&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fn</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Latitude&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">latitude</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Longitude&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">longitude</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">elev</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Elevation&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elevation</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">east</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;easting (m)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">easting</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">north</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;northing (m)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">northing</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">utm_zone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;utm zone&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">utm_zone</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rotation_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;rotation angle in degrees from north&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation_angle</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Z</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;mtpy.core.z.Z object to hole impedance tensor&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Tipper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;mtpy.core.z.Tipper object to hold tipper information&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">station</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;station name&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;mtpy.analysis.pt.PhaseTensor object to hold phase tensor&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">MTpt</span><span class="o">.</span><span class="n">PhaseTensor</span><span class="p">(</span><span class="n">z_object</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="p">)</span>

    <span class="c1"># ==========================================================================</span>
    <span class="c1"># set functions</span>
    <span class="c1"># ==========================================================================</span>
    <span class="nd">@lat</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">lat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">latitude</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set latitude making sure the input is in decimal degrees</span>

<span class="sd">        upon setting utm coordinates are recalculated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">latitude</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">project_location2utm</span><span class="p">()</span>

    <span class="nd">@lon</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">lon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">longitude</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set longitude making sure the input is in decimal degrees</span>

<span class="sd">        upon setting utm coordinates are recalculated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">project_location2utm</span><span class="p">()</span>

    <span class="nd">@elev</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">elev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elevation</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set elevation, should be input as meters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elevation</span> <span class="o">=</span> <span class="n">elevation</span>

    <span class="nd">@east</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">east</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">easting</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set easting in meters</span>

<span class="sd">        upon setting lat and lon are recalculated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">easting</span> <span class="o">=</span> <span class="n">easting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">project_location2ll</span><span class="p">()</span>

    <span class="nd">@north</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">north</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">northing</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set northing in meters</span>

<span class="sd">        upon setting lat and lon are recalculated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">northing</span> <span class="o">=</span> <span class="n">northing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">project_location2ll</span><span class="p">()</span>

    <span class="nd">@utm_zone</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">utm_zone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">utm_zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set UTM zone</span>

<span class="sd">        upon setting lat and lon are recalculated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">utm_zone</span> <span class="o">=</span> <span class="n">utm_zone</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">project_location2ll</span><span class="p">()</span>

    <span class="nd">@rotation_angle</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">rotation_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theta_r</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set rotation angle in degrees assuming North is 0 measuring clockwise</span>
<span class="sd">        positive to East as 90.</span>

<span class="sd">        upon setting rotates Z and Tipper</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rotation_angle</span> <span class="o">=</span> <span class="n">theta_r</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">theta_r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">theta_r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">theta_r</span><span class="p">)</span>

        <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Rotated Z, Tipper, Phase Tensor and Zinvariants by&quot;</span>
               <span class="s2">&quot;</span><span class="si">{0:.3f}</span><span class="s2"> degrees&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rotation_angle</span><span class="p">))</span>

    <span class="nd">@Z</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">Z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z_object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set z_object</span>

<span class="sd">        recalculate phase tensor and invariants, which shouldn&#39;t change except</span>
<span class="sd">        for strike angle</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span> <span class="o">=</span> <span class="n">z_object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span><span class="o">.</span><span class="n">compute_resistivity_phase</span><span class="p">()</span>

    <span class="nd">@Tipper</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">Tipper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set tipper object</span>

<span class="sd">        recalculate tipper angle and magnitude</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span> <span class="o">=</span> <span class="n">t_object</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">compute_amp_phase</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span><span class="o">.</span><span class="n">compute_mag_direction</span><span class="p">()</span>

    <span class="nd">@station</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">station</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">station_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set station name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">station_name</span>

    <span class="c1"># ==========================================================================</span>
    <span class="c1">#  read in files</span>
    <span class="c1"># ==========================================================================</span>
<div class="viewcode-block" id="MT.read_mt_file"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT.read_mt_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_mt_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read an MT response file.</span>

<span class="sd">        .. note:: Currently only .edi, .xml, and .j files are supported</span>

<span class="sd">        :param fn: full path to input file</span>
<span class="sd">        :type fn: string</span>

<span class="sd">        :param file_type: [&#39;edi&#39; | &#39;j&#39; | &#39;xml&#39; | ... ]</span>
<span class="sd">                          if None, automatically detects file type by</span>
<span class="sd">                          the extension.</span>
<span class="sd">        :type file_type: string</span>

<span class="sd">        :Example: ::</span>

<span class="sd">            &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">            &gt;&gt;&gt; mt_obj = mt.MT()</span>
<span class="sd">            &gt;&gt;&gt; mt_obj.read_mt_file(r&quot;/home/mt/mt01.xml&quot;)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">file_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fn</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;edi&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read_edi_file</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;j&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read_j_file</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;xml&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read_xml_file</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MT_Error</span><span class="p">(</span><span class="s1">&#39;File type not supported yet&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MT.write_mt_file"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT.write_mt_file">[docs]</a>    <span class="k">def</span> <span class="nf">write_mt_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fn_basename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;edi&#39;</span><span class="p">,</span>
                      <span class="n">new_Z_obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_Tipper_obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">longitude_format</span><span class="o">=</span><span class="s1">&#39;LON&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write an mt file, the supported file types are EDI and XML.</span>

<span class="sd">        .. todo:: jtype and Gary Egberts z format</span>

<span class="sd">        :param save_dir: full path save directory</span>
<span class="sd">        :type save_dir: string</span>

<span class="sd">        :param fn_basename: name of file with or without extension</span>
<span class="sd">        :type fn_basename: string</span>

<span class="sd">        :param file_type: [ &#39;edi&#39; | &#39;xml&#39; ]</span>
<span class="sd">        :type file_type: string</span>

<span class="sd">        :param new_Z_obj: new Z object</span>
<span class="sd">        :type new_Z_obj: mtpy.core.z.Z</span>

<span class="sd">        :param new_Tipper_obj: new Tipper object</span>
<span class="sd">        :type new_Tipper_obj: mtpy.core.z.Tipper</span>


<span class="sd">        :returns: full path to file</span>
<span class="sd">        :rtype: string</span>

<span class="sd">        :Example: ::</span>

<span class="sd">            &gt;&gt;&gt; mt_obj.write_mt_file(file_type=&#39;xml&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_dir</span> <span class="o">=</span> <span class="n">save_dir</span>

        <span class="k">if</span> <span class="n">fn_basename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fn_basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">fn_basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fn_basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">fn_basename</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fn_basename</span><span class="p">,</span> <span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;xml&#39;</span><span class="p">,</span> <span class="s1">&#39;edi&#39;</span><span class="p">]:</span>
                <span class="n">fn_basename</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fn_basename</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span>
                <span class="n">file_type</span> <span class="o">=</span> <span class="n">ext</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">MT_Error</span><span class="p">(</span><span class="s1">&#39;File type </span><span class="si">{0}</span><span class="s1"> not supported yet.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ext</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fn_basename</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="p">,</span> <span class="n">file_type</span><span class="p">)</span>

        <span class="n">fn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_dir</span><span class="p">,</span> <span class="n">fn_basename</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">file_type</span> <span class="o">==</span> <span class="s1">&#39;edi&#39;</span><span class="p">:</span>
            <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_edi_file</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span>
                                      <span class="n">new_Z</span><span class="o">=</span><span class="n">new_Z_obj</span><span class="p">,</span>
                                      <span class="n">new_Tipper</span><span class="o">=</span><span class="n">new_Tipper_obj</span><span class="p">,</span>
                                      <span class="n">longitude_format</span><span class="o">=</span><span class="n">longitude_format</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">file_type</span> <span class="o">==</span> <span class="s1">&#39;xml&#39;</span><span class="p">:</span>
            <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_xml_file</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span>
                                      <span class="n">new_Z</span><span class="o">=</span><span class="n">new_Z_obj</span><span class="p">,</span>
                                      <span class="n">new_Tipper</span><span class="o">=</span><span class="n">new_Tipper_obj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fn</span></div>

    <span class="c1"># --&gt; read in edi file</span>
    <span class="k">def</span> <span class="nf">_read_edi_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edi_fn</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        read in edi file and set attributes accordingly</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">edi_fn</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">MT_Error</span><span class="p">(</span><span class="s1">&#39;Could not find </span><span class="si">{0}</span><span class="s1">, check path.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">edi_fn</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">edi_fn</span><span class="p">)</span>

        <span class="n">edi_obj</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">Edi</span><span class="p">(</span><span class="n">edi_fn</span><span class="o">=</span><span class="n">edi_fn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_edi_get_site</span><span class="p">(</span><span class="n">edi_obj</span><span class="p">)</span>
        
        <span class="c1"># get info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_notes</span><span class="p">()</span>
        
        <span class="c1"># get field notes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edi_get_field_notes</span><span class="p">(</span><span class="n">edi_obj</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Z</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Tipper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">station</span>

        <span class="c1"># --&gt; make sure things are ordered from high frequency to low</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_freq_order</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_edi_get_site</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edi_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get Site information</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lat</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">lat</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lon</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">lon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elev</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">elev</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">acquired_by</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">acqby</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">survey</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">loc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">start_date</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">acqdate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">datum</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">datum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elev_units</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">coordinate_system</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">start_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">end_date</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}{1:02}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">start_date</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">8</span><span class="p">],</span>
                                                          <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">start_date</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">declination</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">declination</span>

    <span class="k">def</span> <span class="nf">_edi_get_field_notes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edi_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get FieldNotes attributes from edi</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># get information about different sensors</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_hx</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="p">,</span>
                        <span class="n">key</span><span class="p">,</span>
                        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_hx</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_hy</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="p">,</span>
                        <span class="n">key</span><span class="p">,</span>
                        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_hy</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_hz</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="p">,</span>
                        <span class="n">key</span><span class="p">,</span>
                        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_hz</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_ex</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="p">,</span>
                        <span class="n">key</span><span class="p">,</span>
                        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_ex</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_ey</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="p">,</span>
                        <span class="n">key</span><span class="p">,</span>
                        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span><span class="o">.</span><span class="n">meas_ey</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">hx</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">hy</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">hz</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">b_instrument_type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">b_instrument_type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">b_instrument_type</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">e_instrument_type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">e_instrument_type</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataLogger</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">b_logger_type</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># keep the edi object around, should be able to deprecate this later</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edi_obj</span> <span class="o">=</span> <span class="n">edi_obj</span>

    <span class="k">def</span> <span class="nf">_parse_notes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        parse the notes section if there is any information that is useful</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">a_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">a_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_dict</span><span class="p">[</span><span class="n">a_key</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">a_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">a_value</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="n">a_list</span> <span class="o">=</span> <span class="n">a_key</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">a_key</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;mtft&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">a_key</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;birrp&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">a_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;processing&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">a_list</span>

            <span class="n">a1</span> <span class="o">=</span> <span class="n">a_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">obj_attr</span> <span class="o">=</span> <span class="n">a_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">a1</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;processing&#39;</span><span class="p">,</span> <span class="s1">&#39;fieldnotes&#39;</span><span class="p">,</span> <span class="s1">&#39;copyright&#39;</span><span class="p">,</span> <span class="s1">&#39;provenance&#39;</span><span class="p">]:</span>
                <span class="n">cl</span> <span class="o">=</span> <span class="n">a_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">a1</span> <span class="o">==</span> <span class="s1">&#39;fieldnotes&#39;</span><span class="p">:</span>
                    <span class="n">cl</span> <span class="o">=</span> <span class="s1">&#39;FieldNotes&#39;</span>

                <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cl</span><span class="p">)</span>
                <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">cl_attr</span> <span class="o">=</span> <span class="n">a_list</span><span class="p">[</span><span class="n">count</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">cl_attr</span> <span class="o">==</span> <span class="s1">&#39;dataquality&#39;</span><span class="p">:</span>
                        <span class="n">cl_attr</span> <span class="o">=</span> <span class="s1">&#39;DataQuality&#39;</span>
                    <span class="k">elif</span> <span class="n">cl_attr</span> <span class="o">==</span> <span class="s1">&#39;datalogger&#39;</span><span class="p">:</span>
                        <span class="n">cl_attr</span> <span class="o">=</span> <span class="s1">&#39;DataLogger&#39;</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">cl_attr</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">cl_attr</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
                        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                            <span class="c1"># print &#39;Could not get {0}&#39;.format(cl_attr)</span>
                            <span class="k">pass</span>

                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">obj_attr</span><span class="p">,</span> <span class="n">a_value</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">a_key</span><span class="p">)</span>

    <span class="c1"># --&gt; write edi file</span>
    <span class="k">def</span> <span class="nf">_write_edi_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_edi_fn</span><span class="p">,</span> <span class="n">new_Z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_Tipper</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">longitude_format</span><span class="o">=</span><span class="s1">&#39;LON&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        write a new edi file if things have changed.  Note if new_Z or</span>
<span class="sd">        new_Tipper are not None, they are not changed in MT object, you</span>
<span class="sd">        need to change them manually if you want them to be changed.</span>
<span class="sd">        Similarly, the new function name does not change the MT objecte fn</span>
<span class="sd">        attribute but does change MT.edi_object.fn attribute.</span>

<span class="sd">        :param new_edi_fn: full path to new edi file</span>
<span class="sd">        :type new_edi_fn: string</span>

<span class="sd">        :param new_Z: new Z object</span>
<span class="sd">        :type new_Z: mtpy.core.z.Z</span>

<span class="sd">        :param new_Tipper: new Tipper object</span>
<span class="sd">        :type new_Tipper: mtpy.core.z.Tipper</span>

<span class="sd">        :returns edi_fn: full path to edi file written</span>
<span class="sd">        :rtype edi_fn: string</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># get header information, mostly from site</span>
        <span class="n">edi_obj</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">Edi</span><span class="p">()</span>
        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edi_set_header</span><span class="p">()</span>

        <span class="c1"># get information</span>
        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Info</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">Information</span><span class="p">()</span>
        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Info</span><span class="o">.</span><span class="n">info_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edi_set_info_list</span><span class="p">()</span>

        <span class="c1"># get define measurement</span>
        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Define_measurement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edi_set_define_measurement</span><span class="p">()</span>

        <span class="c1"># get mtsec</span>
        <span class="n">edi_obj</span><span class="o">.</span><span class="n">Data_sect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edi_set_data_sect</span><span class="p">()</span>

        <span class="c1"># set Z and T data</span>
        <span class="k">if</span> <span class="n">new_Z</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">edi_obj</span><span class="o">.</span><span class="n">Z</span> <span class="o">=</span> <span class="n">new_Z</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">edi_obj</span><span class="o">.</span><span class="n">Z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Z</span>

        <span class="k">if</span> <span class="n">new_Tipper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">edi_obj</span><span class="o">.</span><span class="n">Tipper</span> <span class="o">=</span> <span class="n">new_Tipper</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">edi_obj</span><span class="o">.</span><span class="n">Tipper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Tipper</span>

        <span class="c1"># set rotation angle</span>
        <span class="n">edi_obj</span><span class="o">.</span><span class="n">zrot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation_angle</span>

        <span class="c1"># --&gt; write edi file</span>
        <span class="n">edi_fn</span> <span class="o">=</span> <span class="n">edi_obj</span><span class="o">.</span><span class="n">write_edi_file</span><span class="p">(</span><span class="n">new_edi_fn</span><span class="o">=</span><span class="n">new_edi_fn</span><span class="p">,</span> <span class="n">longitude_format</span><span class="o">=</span><span class="n">longitude_format</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">edi_fn</span>

    <span class="k">def</span> <span class="nf">_edi_set_header</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        make an edi header class</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">header</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">Header</span><span class="p">()</span>
        <span class="n">header</span><span class="o">.</span><span class="n">acqby</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">acquired_by</span>
        <span class="n">header</span><span class="o">.</span><span class="n">acqdate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">start_date</span>
        <span class="n">header</span><span class="o">.</span><span class="n">coordinate_system</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">coordinate_system</span>
        <span class="n">header</span><span class="o">.</span><span class="n">dataid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">id</span>
        <span class="n">header</span><span class="o">.</span><span class="n">datum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">datum</span>
        <span class="n">header</span><span class="o">.</span><span class="n">elev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elev</span>
        <span class="n">header</span><span class="o">.</span><span class="n">fileby</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">acquired_by</span>
        <span class="n">header</span><span class="o">.</span><span class="n">lat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lat</span>
        <span class="n">header</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">project</span>
        <span class="n">header</span><span class="o">.</span><span class="n">lon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lon</span>
        <span class="n">header</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">project</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">survey</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">header</span><span class="o">.</span><span class="n">survey</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">survey</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">header</span><span class="o">.</span><span class="n">survey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">survey</span>
        <span class="n">header</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elev_units</span>
        <span class="n">header</span><span class="o">.</span><span class="n">declination</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">declination</span>
        <span class="n">header</span><span class="o">.</span><span class="n">progvers</span> <span class="o">=</span> <span class="s1">&#39;MTpy&#39;</span>
        <span class="n">header</span><span class="o">.</span><span class="n">progdate</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">header</span>

    <span class="c1"># --&gt; get information list for edi</span>
    <span class="k">def</span> <span class="nf">_edi_set_info_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the information for an edi file</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">info_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># write previous information first</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">l_key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">l_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">l_key</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">l_value</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()))</span>

        <span class="c1"># get field notes information includes data quality</span>
        <span class="k">for</span> <span class="n">f_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="p">,</span> <span class="n">f_key</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">t_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="k">if</span> <span class="n">t_key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_kw_list&#39;</span><span class="p">,</span> <span class="s1">&#39;_fmt_list&#39;</span><span class="p">,</span> <span class="s1">&#39;_logger&#39;</span><span class="p">]:</span>
                    <span class="k">continue</span>
                <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;fieldnotes.</span><span class="si">{0}</span><span class="s1">.</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f_key</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                                                    <span class="n">t_key</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">t_key</span><span class="p">)</span>
                <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span> <span class="n">l_value</span><span class="p">))</span>

        <span class="c1"># get processing information</span>
        <span class="k">for</span> <span class="n">p_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">p_key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;software&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">Software</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">if</span> <span class="n">s_key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;author&#39;</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">a_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">Software</span><span class="o">.</span><span class="n">Author</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                            <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;processing.software.author.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                <span class="n">a_key</span><span class="p">)</span>
                            <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">Software</span><span class="o">.</span><span class="n">Author</span><span class="p">,</span>
                                              <span class="n">a_key</span><span class="p">)</span>
                            <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span>
                                                                <span class="n">l_value</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;processing.software.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s_key</span><span class="p">)</span>
                        <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">Software</span><span class="p">,</span> <span class="n">s_key</span><span class="p">)</span>
                        <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span>
                                                            <span class="n">l_value</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">p_key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;remotesite&#39;</span> <span class="ow">and</span> \
                 <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">if</span> <span class="n">s_key</span> <span class="o">==</span> <span class="s1">&#39;Location&#39;</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">a_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                            <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;processing.remote_site.location.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                <span class="n">a_key</span><span class="p">)</span>
                            <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">Location</span><span class="p">,</span>
                                              <span class="n">a_key</span><span class="p">)</span>
                            <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span>
                                                                <span class="n">l_value</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;processing.remote_site.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s_key</span><span class="p">)</span>
                        <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="p">,</span> <span class="n">s_key</span><span class="p">)</span>
                        <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span>
                                                            <span class="n">l_value</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;processing.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p_key</span><span class="p">)</span>
                <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="p">,</span> <span class="n">p_key</span><span class="p">)</span>
                <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span> <span class="n">l_value</span><span class="p">))</span>

        <span class="c1"># get copyright information</span>
        <span class="k">for</span> <span class="n">c_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">c_key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;citation&#39;</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">author</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">p_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;copyright.citation.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p_key</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                    <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="p">,</span> <span class="n">p_key</span><span class="p">)</span>
                    <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span> <span class="n">l_value</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;copyright.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c_key</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="p">,</span> <span class="n">c_key</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">l_value</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
                    <span class="n">l_value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l_value</span><span class="p">)</span>
                <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span> <span class="n">l_value</span><span class="p">))</span>

        <span class="c1"># get provenance</span>
        <span class="k">for</span> <span class="n">p_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">p_key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;creator&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;provenance.creator.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s_key</span><span class="p">)</span>
                    <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="p">,</span> <span class="n">s_key</span><span class="p">)</span>
                    <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span> <span class="n">l_value</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">p_key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;submitter&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;provenance.submitter.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s_key</span><span class="p">)</span>
                    <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="p">,</span> <span class="n">s_key</span><span class="p">)</span>
                    <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span> <span class="n">l_value</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;provenance.</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p_key</span><span class="p">)</span>
                <span class="n">l_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="p">,</span> <span class="n">p_key</span><span class="p">)</span>
                <span class="n">info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span> <span class="n">l_value</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">info_list</span>

    <span class="c1"># get edi define measurement</span>
    <span class="k">def</span> <span class="nf">_edi_set_define_measurement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get define measurement block for an edi file</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">define_meas</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">DefineMeasurement</span><span class="p">()</span>
        <span class="n">define_meas</span><span class="o">.</span><span class="n">maxchan</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">define_meas</span><span class="o">.</span><span class="n">refelev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elev</span>
        <span class="n">define_meas</span><span class="o">.</span><span class="n">reflat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lat</span>
        <span class="n">define_meas</span><span class="o">.</span><span class="n">reflon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lon</span>
        <span class="n">define_meas</span><span class="o">.</span><span class="n">reftype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">coordinate_system</span>
        <span class="n">define_meas</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elev_units</span>

        <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_ex</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">EMeasurement</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_ex</span><span class="o">.</span><span class="n">_kw_list</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">define_meas</span><span class="o">.</span><span class="n">meas_ex</span><span class="p">,</span>
                    <span class="n">key</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>

        <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_ey</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">EMeasurement</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_ey</span><span class="o">.</span><span class="n">_kw_list</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">define_meas</span><span class="o">.</span><span class="n">meas_ey</span><span class="p">,</span>
                    <span class="n">key</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>

        <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_hx</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">HMeasurement</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_hx</span><span class="o">.</span><span class="n">_kw_list</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">define_meas</span><span class="o">.</span><span class="n">meas_hx</span><span class="p">,</span>
                    <span class="n">key</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>

        <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_hy</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">HMeasurement</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_hy</span><span class="o">.</span><span class="n">_kw_list</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">define_meas</span><span class="o">.</span><span class="n">meas_hy</span><span class="p">,</span>
                    <span class="n">key</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_hz</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">HMeasurement</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">define_meas</span><span class="o">.</span><span class="n">meas_hz</span><span class="o">.</span><span class="n">_kw_list</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">define_meas</span><span class="o">.</span><span class="n">meas_hz</span><span class="p">,</span>
                        <span class="n">key</span><span class="p">,</span>
                        <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">define_meas</span>

    <span class="k">def</span> <span class="nf">_edi_set_data_sect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get mt data section for edi file</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">sect</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">DataSection</span><span class="p">()</span>
        <span class="n">sect</span><span class="o">.</span><span class="n">data_type</span> <span class="o">=</span> <span class="s1">&#39;MT&#39;</span>
        <span class="n">sect</span><span class="o">.</span><span class="n">nfreq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">sect</span><span class="o">.</span><span class="n">sectid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span>
        <span class="n">nchan</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">nchan</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">sect</span><span class="o">.</span><span class="n">nchan</span> <span class="o">=</span> <span class="n">nchan</span>
        <span class="n">sect</span><span class="o">.</span><span class="n">maxblks</span> <span class="o">=</span> <span class="mi">999</span>
        <span class="n">sect</span><span class="o">.</span><span class="n">ex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">acqchan</span>
        <span class="n">sect</span><span class="o">.</span><span class="n">ey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">acqchan</span>
        <span class="n">sect</span><span class="o">.</span><span class="n">hx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">acqchan</span>
        <span class="n">sect</span><span class="o">.</span><span class="n">hy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">acqchan</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">sect</span><span class="o">.</span><span class="n">hz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">acqchan</span>

        <span class="k">return</span> <span class="n">sect</span>

    <span class="c1"># --&gt; check the order of frequencies</span>
    <span class="k">def</span> <span class="nf">_check_freq_order</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check to make sure the Z and Tipper arrays are ordered such that</span>
<span class="sd">        the first index corresponds to the highest frequency and the last</span>
<span class="sd">        index corresponds to the lowest freqeuncy.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="nb">print</span> <span class="s1">&#39;Flipping arrays to be ordered from short period to long&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">copy</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">z_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">z_err</span><span class="o">.</span><span class="n">copy</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="o">.</span><span class="n">copy</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">freq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">freq</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span><span class="o">.</span><span class="n">copy</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper_err</span><span class="o">.</span><span class="n">copy</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">freq</span><span class="o">.</span><span class="n">copy</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_read_j_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_fn</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        read j file</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">j_obj</span> <span class="o">=</span> <span class="n">MTj</span><span class="o">.</span><span class="n">JFile</span><span class="p">(</span><span class="n">j_fn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">j_fn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">j_fn</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Z</span> <span class="o">=</span> <span class="n">j_obj</span><span class="o">.</span><span class="n">Z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span> <span class="o">=</span> <span class="n">j_obj</span><span class="o">.</span><span class="n">Tipper</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_freq_order</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">j_obj</span><span class="o">.</span><span class="n">metadata_dict</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">j_obj</span><span class="o">.</span><span class="n">metadata_dict</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elevation</span> <span class="o">=</span> <span class="n">j_obj</span><span class="o">.</span><span class="n">metadata_dict</span><span class="p">[</span><span class="s1">&#39;elevation&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_dict</span> <span class="o">=</span> <span class="n">j_obj</span><span class="o">.</span><span class="n">header_dict</span>

    <span class="k">def</span> <span class="nf">_read_xml_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_fn</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        read xml file</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">xml_fn</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">MT_Error</span><span class="p">(</span><span class="s1">&#39;Could not find </span><span class="si">{0}</span><span class="s1">, check path.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xml_fn</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">xml_fn</span><span class="p">)</span>

        <span class="n">xml_obj</span> <span class="o">=</span> <span class="n">MTxml</span><span class="o">.</span><span class="n">MT_XML</span><span class="p">()</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">read_xml_file</span><span class="p">(</span><span class="n">xml_fn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Z</span> <span class="o">=</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">Z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span> <span class="o">=</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">Tipper</span>

        <span class="c1"># check order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_freq_order</span><span class="p">()</span>

        <span class="c1"># get information and fill attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xml_get_site</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xml_get_notes</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xml_get_field_notes</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xml_get_copyright</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xml_get_provenance</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xml_get_processing</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_xml_get_site</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get Site information from xml Site</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get information</span>
        <span class="k">for</span> <span class="n">s_attr</span> <span class="ow">in</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">s_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
            <span class="n">x_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="p">,</span> <span class="n">s_attr</span><span class="p">)</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">x_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;acquiredby&#39;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;acquired_by&#39;</span>
            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;end&#39;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;end_date&#39;</span>
            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;start&#39;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;start_date&#39;</span>
            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;runlist&#39;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;run_list&#39;</span>
            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;yearcollected&#39;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;year_collected&#39;</span>
            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;datecollected&#39;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;date_collected&#39;</span>

            <span class="n">value</span> <span class="o">=</span> <span class="n">x_obj</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;location&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">l_attr</span> <span class="ow">in</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">l_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="n">l_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="p">,</span> <span class="n">l_attr</span><span class="p">)</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">l_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">l_obj</span><span class="o">.</span><span class="n">value</span>
                    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;elevation&#39;</span><span class="p">:</span>
                        <span class="n">units</span> <span class="o">=</span> <span class="n">l_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elev_units</span> <span class="o">=</span> <span class="n">units</span>

                    <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;declination&#39;</span><span class="p">:</span>
                        <span class="n">units</span> <span class="o">=</span> <span class="n">l_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;epoch&#39;</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">declination_epoch</span> <span class="o">=</span> <span class="n">units</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_xml_get_notes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get notes and set in a dictionary that is similar to edi notes</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">Information</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_dict</span><span class="p">[</span><span class="s1">&#39;notes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">info_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;notes = </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">Notes</span><span class="o">.</span><span class="n">value</span><span class="p">))]</span>

    <span class="k">def</span> <span class="nf">_xml_get_field_notes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get field notes information</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">f_attr</span> <span class="ow">in</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">f_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;instrument&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Instrument</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="n">i_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Instrument</span><span class="p">,</span> <span class="n">i_attr</span><span class="p">)</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">value</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataLogger</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

            <span class="k">elif</span> <span class="s1">&#39;dipole&#39;</span> <span class="ow">in</span> <span class="n">f_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">xml_d_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="n">azm</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">length</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">comp</span> <span class="o">=</span> <span class="n">xml_d_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">comp</span> <span class="o">=</span> <span class="s1">&#39;ex&#39;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">xml_d_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;ex&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;ey&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="k">for</span> <span class="n">e_attr</span> <span class="ow">in</span> <span class="n">xml_d_obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">e_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="n">e_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_d_obj</span><span class="p">,</span> <span class="n">e_attr</span><span class="p">)</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">e_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">e_obj</span><span class="o">.</span><span class="n">value</span>

                    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;azimuth&#39;</span><span class="p">:</span>
                        <span class="n">azm</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;length&#39;</span><span class="p">:</span>
                        <span class="n">length</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;ex&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;ey&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

                <span class="c1"># need to set x, y, x2, y2</span>
                <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="n">length</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">azm</span><span class="p">))</span>
                <span class="n">y2</span> <span class="o">=</span> <span class="n">length</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">azm</span><span class="p">))</span>

                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">,</span> <span class="s1">&#39;y2&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">]):</span>
                    <span class="k">if</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;ex&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;ey&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

            <span class="k">elif</span> <span class="s1">&#39;magnetometer&#39;</span> <span class="ow">in</span> <span class="n">f_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">xml_d_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">comp</span> <span class="o">=</span> <span class="n">xml_d_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">comp</span> <span class="o">=</span> <span class="n">xml_d_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">comp</span> <span class="o">=</span> <span class="s1">&#39;hx&#39;</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">xml_d_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;hx&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;hy&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;hz&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;fluxgate&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">pass</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="k">for</span> <span class="n">m_attr</span> <span class="ow">in</span> <span class="n">xml_d_obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">m_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="n">m_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer</span><span class="p">,</span> <span class="n">m_attr</span><span class="p">)</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">m_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">m_obj</span><span class="o">.</span><span class="n">value</span>

                    <span class="k">if</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;hx&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;hy&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;hz&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">comp</span> <span class="o">==</span> <span class="s1">&#39;fluxgate&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

            <span class="k">elif</span> <span class="s1">&#39;dataquality&#39;</span> <span class="ow">in</span> <span class="n">f_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">d_attr</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">d_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="n">d_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">d_attr</span><span class="p">)</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">d_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;goodfromperiod&#39;</span><span class="p">:</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;good_from_period&#39;</span>
                    <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;goodtoperiod&#39;</span><span class="p">:</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;good_to_period&#39;</span>
                    <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;comments&#39;</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="p">,</span>
                                <span class="s1">&#39;author&#39;</span><span class="p">,</span>
                                <span class="n">d_obj</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;comments&#39;</span> <span class="ow">and</span> \
                            <span class="n">f_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;dataqualitywarnings&#39;</span><span class="p">:</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;warnings_&#39;</span> <span class="o">+</span> <span class="n">name</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">d_obj</span><span class="o">.</span><span class="n">value</span>

                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_xml_get_copyright</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get copyright information</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">f_attr</span> <span class="ow">in</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">f_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">f_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;citation&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="n">i_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="p">,</span> <span class="n">i_attr</span><span class="p">)</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">value</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;releasestatus&#39;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;release_status&#39;</span>
                <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;conditionsofuse&#39;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;conditions_of_use&#39;</span>
                <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;additionalinfo&#39;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;additional_info&#39;</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_xml_get_provenance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get provenance infor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">f_attr</span> <span class="ow">in</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">f_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">f_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;creator&#39;</span><span class="p">,</span> <span class="s1">&#39;submitter&#39;</span><span class="p">]:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="n">s_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="n">i_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">i_attr</span><span class="p">)</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">value</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">s_obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;creationtime&#39;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;creation_time&#39;</span>
                <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;creatingapplication&#39;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;creating_application&#39;</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">value</span>

                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_xml_get_processing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get processing info</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">f_attr</span> <span class="ow">in</span> <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">f_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="s1">&#39;software&#39;</span> <span class="ow">in</span> <span class="n">f_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="n">i_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">i_attr</span><span class="p">)</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;lastmod&#39;</span><span class="p">:</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;last_modified&#39;</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">value</span>
                    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;author&#39;</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
                        <span class="n">value</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">value</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">Software</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s1">&#39;remoteinfo&#39;</span> <span class="ow">in</span> <span class="n">f_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">i_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="n">i_attr</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;location&#39;</span><span class="p">:</span>
                        <span class="n">loc_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">i_attr</span><span class="p">)</span>
                        
                        <span class="k">for</span> <span class="n">l_attr</span> <span class="ow">in</span> <span class="n">loc_obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="k">if</span> <span class="n">l_attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_name&#39;</span><span class="p">,</span> <span class="s1">&#39;_attr&#39;</span><span class="p">,</span> <span class="s1">&#39;_value&#39;</span><span class="p">]:</span>
                                <span class="k">continue</span>
                            <span class="n">l_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">loc_obj</span><span class="p">,</span> <span class="n">l_attr</span><span class="p">)</span>
                            <span class="n">name</span> <span class="o">=</span> <span class="n">l_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="n">l_obj</span><span class="o">.</span><span class="n">value</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">Location</span><span class="p">,</span>
                                    <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">i_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">i_attr</span><span class="p">)</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;yearcollected&#39;</span><span class="p">:</span>
                            <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;year_collected&#39;</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="n">i_obj</span><span class="o">.</span><span class="n">value</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="p">,</span> <span class="n">f_attr</span><span class="p">)</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;signconvention&#39;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;sign_convention&#39;</span>
                <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;remoteref&#39;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;remote_ref&#39;</span>
                <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;processedby&#39;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;processed_by&#39;</span>
                <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;processingtag&#39;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;processing_tag&#39;</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">value</span>

                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_write_xml_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_fn</span><span class="p">,</span> <span class="n">new_Z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_Tipper</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write a xml file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">new_Z</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Z</span> <span class="o">=</span> <span class="n">new_Z</span>
        <span class="k">if</span> <span class="n">new_Tipper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span> <span class="o">=</span> <span class="n">new_Tipper</span>

        <span class="n">xml_obj</span> <span class="o">=</span> <span class="n">MTxml</span><span class="o">.</span><span class="n">MT_XML</span><span class="p">()</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Attachment</span><span class="o">.</span><span class="n">Filename</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fn</span><span class="p">)</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">PrimaryData</span><span class="o">.</span><span class="n">Filename</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fn</span><span class="p">)[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.png&#39;</span>

        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProductId</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> 
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">year_collected</span><span class="p">)</span>
        
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Tipper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span>

        <span class="n">xml_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xml_set_provenance</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="n">xml_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xml_set_copyright</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="n">xml_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xml_set_site</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="n">xml_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xml_set_field_notes</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="n">xml_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xml_set_processing</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        <span class="n">xml_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xml_set_site_layout</span><span class="p">(</span><span class="n">xml_obj</span><span class="p">)</span>
        
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">write_xml_file</span><span class="p">(</span><span class="n">xml_fn</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_xml_set_site</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set the Site attributes in the xml object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Project</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">project</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">survey</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Survey</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">survey</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Survey</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">survey</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Id</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">id</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">AcquiredBy</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">acquired_by</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Start</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">start_date</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">End</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">end_date</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">RunList</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">run_list</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Orientation</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;geomagnetic&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Orientation</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;angle_to_geographic_north&#39;</span><span class="p">:</span>\
                                             <span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">declination</span><span class="p">)}</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Orientation</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;angle_to_geographic_north&#39;</span><span class="p">:</span> <span class="s1">&#39;0.00&#39;</span><span class="p">}</span>
        
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Latitude</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lat</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Longitude</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lon</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Elevation</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elev</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Elevation</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elev_units</span><span class="p">}</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Declination</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">declination</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Declination</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;epoch&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">declination_epoch</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">xml_obj</span>

    <span class="k">def</span> <span class="nf">_xml_set_field_notes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the FieldNotes attributes of the xml object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Instrument</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataLogger</span><span class="o">.</span><span class="n">type</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Instrument</span><span class="o">.</span><span class="n">Id</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataLogger</span><span class="o">.</span><span class="n">id</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Instrument</span><span class="o">.</span><span class="n">Manufacturer</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataLogger</span><span class="o">.</span><span class="n">manufacturer</span>

        <span class="c1"># EX</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">type</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole</span><span class="o">.</span><span class="n">Id</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">id</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole</span><span class="o">.</span><span class="n">Manufacturer</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">manufacturer</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;EX&#39;</span><span class="p">}</span>
        
        <span class="n">length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span>
                         <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole</span><span class="o">.</span><span class="n">Length</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">length</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">azm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span>
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="n">azm</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole</span><span class="o">.</span><span class="n">Azimuth</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">azm</span><span class="p">)</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole</span><span class="o">.</span><span class="n">Channel</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">acqchan</span>

        <span class="c1"># EY</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole_00</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">type</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole_00</span><span class="o">.</span><span class="n">Id</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">id</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole_00</span><span class="o">.</span><span class="n">Manufacturer</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">manufacturer</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole_00</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;EY&#39;</span><span class="p">}</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span>
                         <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole_00</span><span class="o">.</span><span class="n">Length</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">length</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">azm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span>
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="n">azm</span> <span class="o">=</span> <span class="mf">90.0</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole_00</span><span class="o">.</span><span class="n">Azimuth</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="nb">min</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">azm</span><span class="p">]))</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Dipole_00</span><span class="o">.</span><span class="n">Channel</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">acqchan</span>

        <span class="c1"># HX</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">type</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer</span><span class="o">.</span><span class="n">Id</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">id</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer</span><span class="o">.</span><span class="n">Manufacturer</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">manufacturer</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;HX&#39;</span><span class="p">}</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer</span><span class="o">.</span><span class="n">Azimuth</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">azm</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer</span><span class="o">.</span><span class="n">Channel</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">acqchan</span>

        <span class="c1"># HY</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_00</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">type</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_00</span><span class="o">.</span><span class="n">Id</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">id</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_00</span><span class="o">.</span><span class="n">Manufacturer</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">manufacturer</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_00</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;HY&#39;</span><span class="p">}</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_00</span><span class="o">.</span><span class="n">Azimuth</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">azm</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_00</span><span class="o">.</span><span class="n">Channel</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">acqchan</span>

        <span class="c1"># HZ</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_01</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">type</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_01</span><span class="o">.</span><span class="n">Id</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">id</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_01</span><span class="o">.</span><span class="n">Manufacturer</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">manufacturer</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_01</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;HZ&#39;</span><span class="p">}</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_01</span><span class="o">.</span><span class="n">Azimuth</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">azm</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_01</span><span class="o">.</span><span class="n">Channel</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">acqchan</span>

        <span class="c1"># Data Quality Notes</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQualityNotes</span><span class="o">.</span><span class="n">Rating</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="o">.</span><span class="n">rating</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQualityNotes</span><span class="o">.</span><span class="n">GoodFromPeriod</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="o">.</span><span class="n">good_from_period</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQualityNotes</span><span class="o">.</span><span class="n">GoodToPeriod</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="o">.</span><span class="n">good_to_period</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQualityNotes</span><span class="o">.</span><span class="n">Comments</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="o">.</span><span class="n">comments</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQualityNotes</span><span class="o">.</span><span class="n">Comments</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;author&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="o">.</span><span class="n">author</span><span class="p">}</span>
        <span class="c1"># Data Quality Warnings</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQualityWarnings</span><span class="o">.</span><span class="n">Flag</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="o">.</span><span class="n">warnings_flag</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQualityWarnings</span><span class="o">.</span><span class="n">Comments</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="o">.</span><span class="n">warnings_comments</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQualityWarnings</span><span class="o">.</span><span class="n">Comments</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;author&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">DataQuality</span><span class="o">.</span><span class="n">author</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">xml_obj</span>

    <span class="k">def</span> <span class="nf">_xml_set_processing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Processing attributes of the xml object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">ProcessedBy</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">processed_by</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">ProcessingSoftware</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">Software</span><span class="o">.</span><span class="n">name</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">ProcessingSoftware</span><span class="o">.</span><span class="n">Author</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">Software</span><span class="o">.</span><span class="n">Author</span><span class="o">.</span><span class="n">name</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">ProcessingSoftware</span><span class="o">.</span><span class="n">Version</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">Software</span><span class="o">.</span><span class="n">version</span>

        <span class="c1"># TODO: Need to find a way to put in processing parameters.</span>

        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">SignConvention</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">sign_convention</span>

        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteRef</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">remote_reference</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">Project</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">project</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">Survey</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">survey</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">ID</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">id</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">YearCollected</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">year_collected</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">AcquiredBy</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">acquired_by</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Latitude</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">latitude</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Longitude</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">longitude</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Elevation</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elevation</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">Elevation</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">elev_units</span><span class="p">}</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">ProcessingInfo</span><span class="o">.</span><span class="n">RemoteInfo</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;datum&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Processing</span><span class="o">.</span><span class="n">RemoteSite</span><span class="o">.</span><span class="n">Location</span><span class="o">.</span><span class="n">datum</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">xml_obj</span>

    <span class="k">def</span> <span class="nf">_xml_set_provenance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Provenance attributes of the xml object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">CreatingApplication</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;MTpy 0.1.0&#39;</span>

        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="o">.</span><span class="n">name</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="o">.</span><span class="n">Email</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="o">.</span><span class="n">email</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="o">.</span><span class="n">Org</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="o">.</span><span class="n">organization</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="o">.</span><span class="n">OrgURL</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Submitter</span><span class="o">.</span><span class="n">organization_url</span>

        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="o">.</span><span class="n">name</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="o">.</span><span class="n">Email</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="o">.</span><span class="n">email</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="o">.</span><span class="n">Org</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="o">.</span><span class="n">organization</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="o">.</span><span class="n">OrgURL</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Provenance</span><span class="o">.</span><span class="n">Creator</span><span class="o">.</span><span class="n">organization_url</span>

        <span class="k">return</span> <span class="n">xml_obj</span>

    <span class="k">def</span> <span class="nf">_xml_set_copyright</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Copyright attributes of the xml object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">Authors</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">author</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">Title</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">title</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">Year</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">year</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">Journal</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">journal</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">Volume</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">volume</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">DOI</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">Citation</span><span class="o">.</span><span class="n">doi</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">conditions_of_use</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">ConditionsOfUse</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">conditions_of_use</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">ConditionsOfUse</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">conditions_of_use</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">ReleaseStatus</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">release_status</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">AdditionalInfo</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Copyright</span><span class="o">.</span><span class="n">additional_info</span>

        <span class="k">return</span> <span class="n">xml_obj</span>

    <span class="k">def</span> <span class="nf">_xml_set_site_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set the site layout from define measurement</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">SiteLayout</span><span class="o">.</span><span class="n">InputChannels</span><span class="o">.</span><span class="n">Magnetic_hx</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Hx&quot;</span><span class="p">,</span>
                                                             <span class="s1">&#39;orientation&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">azm</span><span class="p">),</span> 
                                                             <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">x</span><span class="p">),</span>
                                                             <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
                                                             <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.00&#39;</span><span class="p">}</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">SiteLayout</span><span class="o">.</span><span class="n">InputChannels</span><span class="o">.</span><span class="n">Magnetic_hy</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Hy&quot;</span><span class="p">,</span>
                                                             <span class="s1">&#39;orientation&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">max</span><span class="p">([</span><span class="mi">90</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">azm</span><span class="p">])),</span> 
                                                             <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">x</span><span class="p">),</span>
                                                             <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
                                                             <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.00&#39;</span><span class="p">}</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">SiteLayout</span><span class="o">.</span><span class="n">OutputChannels</span><span class="o">.</span><span class="n">Magnetic_hz</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Hz&quot;</span><span class="p">,</span>
                                                             <span class="s1">&#39;orientation&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">azm</span><span class="p">),</span> 
                                                             <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">x</span><span class="p">),</span>
                                                             <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
                                                             <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.00&#39;</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">azm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span>
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="n">azm</span> <span class="o">=</span> <span class="mf">90.0</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">SiteLayout</span><span class="o">.</span><span class="n">OutputChannels</span><span class="o">.</span><span class="n">Electric_ex</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Ex&quot;</span><span class="p">,</span>
                                                             <span class="s1">&#39;orientation&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">azm</span><span class="p">),</span> 
                                                             <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">x</span><span class="p">),</span>
                                                             <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
                                                             <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.00&#39;</span><span class="p">,</span>
                                                             <span class="s1">&#39;x2&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">x2</span><span class="p">),</span>
                                                             <span class="s1">&#39;y2&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">y2</span><span class="p">),</span>
                                                             <span class="s1">&#39;z2&#39;</span><span class="p">:</span><span class="s1">&#39;0.00&#39;</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">azm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span>
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="n">azm</span> <span class="o">=</span> <span class="mf">90.0</span>
        <span class="n">xml_obj</span><span class="o">.</span><span class="n">SiteLayout</span><span class="o">.</span><span class="n">OutputChannels</span><span class="o">.</span><span class="n">Electric_ey</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;Ey&quot;</span><span class="p">,</span>
                                                             <span class="s1">&#39;orientation&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">azm</span><span class="p">),</span> 
                                                             <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">x</span><span class="p">),</span>
                                                             <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
                                                             <span class="s1">&#39;z&#39;</span><span class="p">:</span><span class="s1">&#39;0.00&#39;</span><span class="p">,</span>
                                                             <span class="s1">&#39;x2&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">x2</span><span class="p">),</span>
                                                             <span class="s1">&#39;y2&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{0:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FieldNotes</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">y2</span><span class="p">),</span>
                                                             <span class="s1">&#39;z2&#39;</span><span class="p">:</span><span class="s1">&#39;0.00&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">xml_obj</span>
    
<div class="viewcode-block" id="MT.read_cfg_file"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT.read_cfg_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_cfg_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cfg_fn</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read in a configuration file and populate attributes accordingly.</span>

<span class="sd">        The configuration file should be in the form:</span>
<span class="sd">            | Site.Location.latitude = 46.5</span>
<span class="sd">            | Site.Location.longitude = 122.7</span>
<span class="sd">            | Site.Location.datum = &#39;WGS84&#39;</span>
<span class="sd">            |</span>
<span class="sd">            | Processing.Software.name = BIRRP</span>
<span class="sd">            | Processing.Software.version = 5.2.1</span>
<span class="sd">            |</span>
<span class="sd">            | Provenance.Creator.name = L. Cagniard</span>
<span class="sd">            | Provenance.Submitter.name = I. Larionov</span>


<span class="sd">        :param cfg_fn: full path to configuration file</span>
<span class="sd">        :type cfg_fn: string</span>

<span class="sd">        .. note:: The best way to make a configuration file would be to save</span>
<span class="sd">                  a configuration file first from MT, then filling in the</span>
<span class="sd">                  fields.</span>

<span class="sd">        :Make configuration file: ::</span>

<span class="sd">            &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">            &gt;&gt;&gt; mt_obj = mt.MT()</span>
<span class="sd">            &gt;&gt;&gt; mt_obj.write_cfg_file(r&quot;/mt/generic_config.cfg&quot;)</span>

<span class="sd">        :Read in configuration file: ::</span>

<span class="sd">            &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">            &gt;&gt;&gt; mt_obj = mt.MT()</span>
<span class="sd">            &gt;&gt;&gt; mt_obj.read_cfg_file(r&quot;/home/mt/survey_config.cfg&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cfg_fn</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
            <span class="n">cfg_lines</span> <span class="o">=</span> <span class="n">fid</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">cfg_lines</span><span class="p">:</span>
            <span class="n">line_list</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name_list</span> <span class="o">=</span> <span class="n">line_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
                <span class="n">cl_name</span> <span class="o">=</span> <span class="n">name_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">cl_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;fieldnotes&#39;</span><span class="p">:</span>
                    <span class="n">cl_name</span> <span class="o">=</span> <span class="s1">&#39;FieldNotes&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cl_name</span> <span class="o">=</span> <span class="n">cl_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>

                <span class="n">cl_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cl_name</span><span class="p">)</span>
                <span class="n">cl_attr</span> <span class="o">=</span> <span class="n">name_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">cl_value</span> <span class="o">=</span> <span class="n">line_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">cl_value</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">]:</span>
                    <span class="n">cl_value</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">cl_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cl_value</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">cl_value</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">cl_value</span> <span class="o">=</span> <span class="n">cl_value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                        <span class="n">cl_value</span> <span class="o">=</span> <span class="n">cl_value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">cl_value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">vv</span><span class="p">)</span> <span class="k">for</span> <span class="n">vv</span> <span class="ow">in</span> <span class="n">cl_value</span><span class="p">]</span>
                        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                            <span class="k">pass</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="n">cl_value</span> <span class="o">=</span> <span class="kc">None</span>

                <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">name_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">cl_name</span> <span class="o">=</span> <span class="n">name_list</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">cl_name</span> <span class="o">==</span> <span class="s1">&#39;dataquality&#39;</span><span class="p">:</span>
                        <span class="n">cl_name</span> <span class="o">=</span> <span class="s1">&#39;DataQuality&#39;</span>
                    <span class="k">elif</span> <span class="n">cl_name</span> <span class="o">==</span> <span class="s1">&#39;datalogger&#39;</span><span class="p">:</span>
                        <span class="n">cl_name</span> <span class="o">=</span> <span class="s1">&#39;DataLogger&#39;</span>
                    <span class="k">elif</span> <span class="n">cl_name</span> <span class="o">==</span> <span class="s1">&#39;remotesite&#39;</span><span class="p">:</span>
                        <span class="n">cl_name</span> <span class="o">=</span> <span class="s1">&#39;RemoteSite&#39;</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">cl_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">cl_obj</span><span class="p">,</span> <span class="n">cl_name</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">cl_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">cl_obj</span><span class="p">,</span> <span class="n">cl_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
                            <span class="n">cl_name</span> <span class="o">=</span> <span class="n">cl_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
                        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                            <span class="nb">print</span> <span class="s1">&#39;Could not get </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cl_name</span><span class="p">)</span>

                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">cl_obj</span><span class="p">,</span> <span class="n">cl_attr</span><span class="p">,</span> <span class="n">cl_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="MT.write_cfg_file"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT.write_cfg_file">[docs]</a>    <span class="k">def</span> <span class="nf">write_cfg_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cfg_fn</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write a configuration file for the MT sections</span>

<span class="sd">        :param cfg_fn: full path to configuration file to write to</span>
<span class="sd">        :type cfg_fn: string</span>

<span class="sd">        :return cfg_fn: full path to configuration file</span>
<span class="sd">        :rtype cfg_fn: string</span>

<span class="sd">        :Write configuration file: ::</span>

<span class="sd">            &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">            &gt;&gt;&gt; mt_obj = mt.MT()</span>
<span class="sd">            &gt;&gt;&gt; mt_obj.read_mt_file(r&quot;/home/mt/edi_files/mt01.edi&quot;)</span>
<span class="sd">            &gt;&gt;&gt; mt_obj.write_cfg_file(r&quot;/home/mt/survey_config.cfg&quot;)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">cfg_lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">obj_name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">([</span><span class="s1">&#39;Site&#39;</span><span class="p">,</span> <span class="s1">&#39;FieldNotes&#39;</span><span class="p">,</span> <span class="s1">&#39;Provenance&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;Processing&#39;</span><span class="p">,</span> <span class="s1">&#39;Copyright&#39;</span><span class="p">]):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_name</span><span class="p">)</span>
            <span class="n">l_key</span> <span class="o">=</span> <span class="n">obj_name</span>
            <span class="k">for</span> <span class="n">obj_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="n">obj_attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">obj_key</span><span class="p">)</span>
                <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj_name</span><span class="p">,</span> <span class="n">obj_key</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj_attr</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="ow">and</span> \
                        <span class="n">obj_attr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">a_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">obj_attr</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                        <span class="k">if</span> <span class="n">a_key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_kw_list&#39;</span><span class="p">,</span> <span class="s1">&#39;_fmt_list&#39;</span><span class="p">,</span> <span class="s1">&#39;_logger&#39;</span><span class="p">]:</span>
                            <span class="k">continue</span>
                        <span class="n">obj_attr_01</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj_attr</span><span class="p">,</span> <span class="n">a_key</span><span class="p">)</span>
                        <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.</span><span class="si">{1}</span><span class="s1">.</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj_name</span><span class="p">,</span> <span class="n">obj_key</span><span class="p">,</span> <span class="n">a_key</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj_attr_01</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span>
                                                        <span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">))</span> <span class="ow">and</span> \
                                <span class="n">obj_attr_01</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">b_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">obj_attr_01</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                                <span class="n">obj_attr_02</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj_attr_01</span><span class="p">,</span> <span class="n">b_key</span><span class="p">)</span>
                                <span class="n">l_key</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.</span><span class="si">{1}</span><span class="s1">.</span><span class="si">{2}</span><span class="s1">.</span><span class="si">{3}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj_name</span><span class="p">,</span>
                                                                 <span class="n">obj_key</span><span class="p">,</span>
                                                                 <span class="n">a_key</span><span class="p">,</span>
                                                                 <span class="n">b_key</span><span class="p">)</span>

                                <span class="n">cfg_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span>
                                                                    <span class="n">obj_attr_02</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">cfg_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span>
                                                                <span class="n">obj_attr_01</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cfg_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> = </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_key</span><span class="p">,</span> <span class="n">obj_attr</span><span class="p">))</span>

            <span class="n">cfg_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cfg_fn</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cfg_lines</span><span class="p">))</span>

        <span class="nb">print</span> <span class="s1">&#39;--&gt; Wrote MT configuration file to </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cfg_fn</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cfg_fn</span></div>

<div class="viewcode-block" id="MT.remove_distortion"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT.remove_distortion">[docs]</a>    <span class="k">def</span> <span class="nf">remove_distortion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_freq</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        remove distortion following Bibby et al. [2005].</span>

<span class="sd">        :param num_freq: number of frequencies to look for distortion from the</span>
<span class="sd">                         highest frequency</span>
<span class="sd">        :type num_freq: int</span>

<span class="sd">        :returns: Distortion matrix</span>
<span class="sd">        :rtype: np.ndarray(2, 2, dtype=real)</span>

<span class="sd">        :returns: Z with distortion removed</span>
<span class="sd">        :rtype: mtpy.core.z.Z</span>

<span class="sd">        :Remove distortion and write new .edi file: ::</span>

<span class="sd">            &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">            &gt;&gt;&gt; mt1 = mt.MT(fn=r&quot;/home/mt/edi_files/mt01.edi&quot;)</span>
<span class="sd">            &gt;&gt;&gt; D, new_z = mt1.remove_distortion()</span>
<span class="sd">            &gt;&gt;&gt; mt1.write_mt_file(new_fn=r&quot;/home/mt/edi_files/mt01_dr.edi&quot;,\</span>
<span class="sd">            &gt;&gt;&gt;                    new_Z=new_z)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dummy_z_obj</span> <span class="o">=</span> <span class="n">MTz</span><span class="o">.</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="p">)</span>
        <span class="n">D</span><span class="p">,</span> <span class="n">new_z_object</span> <span class="o">=</span> <span class="n">MTdistortion</span><span class="o">.</span><span class="n">remove_distortion</span><span class="p">(</span><span class="n">z_object</span><span class="o">=</span><span class="n">dummy_z_obj</span><span class="p">,</span>
                                                         <span class="n">num_freq</span><span class="o">=</span><span class="n">num_freq</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">D</span><span class="p">,</span> <span class="n">new_z_object</span></div>

<div class="viewcode-block" id="MT.remove_static_shift"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT.remove_static_shift">[docs]</a>    <span class="k">def</span> <span class="nf">remove_static_shift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ss_x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">ss_y</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove static shift from the apparent resistivity</span>

<span class="sd">        Assume the original observed tensor Z is built by a static shift S</span>
<span class="sd">        and an unperturbated &quot;correct&quot; Z0 :</span>

<span class="sd">             * Z = S * Z0</span>

<span class="sd">        therefore the correct Z will be :</span>
<span class="sd">            * Z0 = S^(-1) * Z</span>


<span class="sd">        :param ss_x: correction factor for x component</span>
<span class="sd">        :type ss_x: float</span>

<span class="sd">        :param ss_y: correction factor for y component</span>
<span class="sd">        :type ss_y: float</span>

<span class="sd">        :returns: new Z object with static shift removed</span>
<span class="sd">        :rtype: mtpy.core.z.Z</span>

<span class="sd">        .. note:: The factors are in resistivity scale, so the</span>
<span class="sd">                  entries of  the matrix &quot;S&quot; need to be given by their</span>
<span class="sd">                  square-roots!</span>

<span class="sd">        :Remove Static Shift: ::</span>

<span class="sd">            &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">            &gt;&gt;&gt; mt_obj = mt.MT(r&quot;/home/mt/mt01.edi&quot;)</span>
<span class="sd">            &gt;&gt;&gt; new_z_obj = mt.remove_static_shift(ss_x=.5, ss_y=1.2)</span>
<span class="sd">            &gt;&gt;&gt; mt_obj.write_mt_file(new_fn=r&quot;/home/mt/mt01_ss.edi&quot;,</span>
<span class="sd">            &gt;&gt;&gt; ...                   new_Z_obj=new_z_obj)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">s_array</span><span class="p">,</span> <span class="n">new_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">remove_ss</span><span class="p">(</span><span class="n">reduce_res_factor_x</span><span class="o">=</span><span class="n">ss_x</span><span class="p">,</span>
                                          <span class="n">reduce_res_factor_y</span><span class="o">=</span><span class="n">ss_y</span><span class="p">)</span>

        <span class="n">new_z_obj</span> <span class="o">=</span> <span class="n">MTz</span><span class="o">.</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="p">)</span>
        <span class="n">new_z_obj</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">new_z</span>

        <span class="k">return</span> <span class="n">new_z_obj</span></div>

<div class="viewcode-block" id="MT.interpolate"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT.interpolate">[docs]</a>    <span class="k">def</span> <span class="nf">interpolate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_freq_array</span><span class="p">,</span> <span class="n">interp_type</span><span class="o">=</span><span class="s1">&#39;slinear&#39;</span><span class="p">,</span> <span class="n">bounds_error</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Interpolate the impedance tensor onto different frequencies</span>

<span class="sd">        :param new_freq_array: a 1-d array of frequencies to interpolate on</span>
<span class="sd">                               to.  Must be with in the bounds of the existing</span>
<span class="sd">                               frequency range, anything outside and an error</span>
<span class="sd">                               will occur.</span>
<span class="sd">        :type new_freq_array: np.ndarray</span>

<span class="sd">        :returns: a new impedance object with the corresponding</span>
<span class="sd">                               frequencies and components.</span>
<span class="sd">        :rtype: mtpy.core.z.Z</span>

<span class="sd">        :returns: a new tipper object with the corresponding</span>
<span class="sd">                                    frequencies and components.</span>
<span class="sd">        :rtype: mtpy.core.z.Tipper</span>

<span class="sd">        :Interpolate: ::</span>

<span class="sd">            &gt;&gt;&gt; import mtpy.core.mt as mt</span>
<span class="sd">            &gt;&gt;&gt; edi_fn = r&quot;/home/edi_files/mt_01.edi&quot;</span>
<span class="sd">            &gt;&gt;&gt; mt_obj = mt.MT(edi_fn)</span>
<span class="sd">            &gt;&gt;&gt; # create a new frequency range to interpolate onto</span>
<span class="sd">            &gt;&gt;&gt; new_freq = np.logspace(-3, 3, 24)</span>
<span class="sd">            &gt;&gt;&gt; new_z_object, new_tipper_obj = mt_obj.interpolate(new_freq)</span>
<span class="sd">            &gt;&gt;&gt; mt_obj.write_mt_file(new_fn=r&quot;/home/edi_files/mt_01_interp.edi&quot;,</span>
<span class="sd">            &gt;&gt;&gt; ...                   new_Z_obj=new_z_object,</span>
<span class="sd">            &gt;&gt;&gt; ...                   new_Tipper_obj=new_tipper_object)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if the interpolation module has not been loaded return</span>
        <span class="k">if</span> <span class="n">interp_import</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s1">&#39;could not interpolate, need to install scipy&#39;</span><span class="p">)</span>

        <span class="c1"># make sure the input is a numpy array</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_freq_array</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">new_freq_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">new_freq_array</span><span class="p">)</span>

        <span class="c1"># check the bounds of the new frequency array</span>
        <span class="k">if</span> <span class="n">bounds_error</span><span class="p">:</span>
            <span class="c1"># YG: the commented block below seems no longer necessary.</span>
            <span class="c1"># floater = 1.e-8  # FZ: a small offset to avoid out-of-bound error in spi interpolation module.</span>
            <span class="c1"># self._logger.info(&quot;massage the new_freq_array&#39;s min and max to avoid out-of-bound interp&quot;)</span>
            <span class="c1"># minindex = np.argmin(new_freq_array)</span>
            <span class="c1"># maxindex = np.argmax(new_freq_array)</span>
            <span class="c1"># new_freq_array[minindex] += floater</span>
            <span class="c1"># new_freq_array[maxindex] -= floater</span>

            <span class="c1"># logger.debug(&quot;new freq array %s&quot;, new_freq_array)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">new_freq_array</span><span class="o">.</span><span class="n">min</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;New frequency minimum of </span><span class="si">{0:.5g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_freq_array</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">+</span> \
                                 <span class="s1">&#39; is smaller than old frequency minimum of </span><span class="si">{0:.5g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">+</span> \
                                 <span class="s1">&#39;.  The new frequency range needs to be within the &#39;</span> <span class="o">+</span>
                                 <span class="s1">&#39;bounds of the old one.&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">new_freq_array</span><span class="o">.</span><span class="n">max</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;New frequency maximum of </span><span class="si">{0:.5g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_freq_array</span><span class="o">.</span><span class="n">max</span><span class="p">())</span> <span class="o">+</span> \
                                 <span class="s1">&#39;is smaller than old frequency maximum of </span><span class="si">{0:.5g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="o">.</span><span class="n">max</span><span class="p">())</span> <span class="o">+</span> \
                                 <span class="s1">&#39;.  The new frequency range needs to be within the &#39;</span> <span class="o">+</span>
                                 <span class="s1">&#39;bounds of the old one.&#39;</span><span class="p">)</span>

        <span class="c1"># make a new Z object</span>
        <span class="n">new_Z</span> <span class="o">=</span> <span class="n">MTz</span><span class="o">.</span><span class="n">Z</span><span class="p">(</span><span class="n">z_array</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">new_freq_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                                       <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;complex&#39;</span><span class="p">),</span>
                      <span class="n">z_err_array</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">new_freq_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                      <span class="n">freq</span><span class="o">=</span><span class="n">new_freq_array</span><span class="p">)</span>

        <span class="n">new_Tipper</span> <span class="o">=</span> <span class="n">MTz</span><span class="o">.</span><span class="n">Tipper</span><span class="p">(</span><span class="n">tipper_array</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">new_freq_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                                                      <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;complex&#39;</span><span class="p">),</span>
                                <span class="n">tipper_err_array</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span>
                                    <span class="p">(</span><span class="n">new_freq_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
                                <span class="n">freq</span><span class="o">=</span><span class="n">new_freq_array</span><span class="p">)</span>

        <span class="c1"># interpolate the impedance tensor</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                <span class="c1"># need to look out for zeros in the impedance</span>
                <span class="c1"># get the indicies of non-zero components</span>
                <span class="n">nz_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">z</span><span class="p">[:,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">])</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nz_index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="c1"># get the non-zero components</span>
                <span class="n">z_real</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">z</span><span class="p">[</span><span class="n">nz_index</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span><span class="o">.</span><span class="n">real</span>
                <span class="n">z_imag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">z</span><span class="p">[</span><span class="n">nz_index</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span>
                <span class="n">z_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">z_err</span><span class="p">[</span><span class="n">nz_index</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span>

                <span class="c1"># get the frequencies of non-zero components</span>
                <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="o">.</span><span class="n">freq</span><span class="p">[</span><span class="n">nz_index</span><span class="p">]</span>

                <span class="c1"># get frequencies to interpolate on to, making sure the</span>
                <span class="c1"># bounds are with in non-zero components</span>
                <span class="n">new_nz_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">new_freq_array</span> <span class="o">&gt;=</span> <span class="n">f</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">&amp;</span>
                                        <span class="p">(</span><span class="n">new_freq_array</span> <span class="o">&lt;=</span> <span class="n">f</span><span class="o">.</span><span class="n">max</span><span class="p">()))</span>
                <span class="n">new_f</span> <span class="o">=</span> <span class="n">new_freq_array</span><span class="p">[</span><span class="n">new_nz_index</span><span class="p">]</span>

                <span class="c1"># create a function that does 1d interpolation</span>
                <span class="n">z_func_real</span> <span class="o">=</span> <span class="n">spi</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">z_real</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">interp_type</span><span class="p">)</span>
                <span class="n">z_func_imag</span> <span class="o">=</span> <span class="n">spi</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">z_imag</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">interp_type</span><span class="p">)</span>
                <span class="n">z_func_err</span> <span class="o">=</span> <span class="n">spi</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">z_err</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">interp_type</span><span class="p">)</span>

                <span class="c1"># interpolate onto new frequency range</span>
                <span class="n">new_Z</span><span class="o">.</span><span class="n">z</span><span class="p">[</span><span class="n">new_nz_index</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_func_real</span><span class="p">(</span>
                    <span class="n">new_f</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">z_func_imag</span><span class="p">(</span><span class="n">new_f</span><span class="p">)</span>
                <span class="n">new_Z</span><span class="o">.</span><span class="n">z_err</span><span class="p">[</span><span class="n">new_nz_index</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_func_err</span><span class="p">(</span><span class="n">new_f</span><span class="p">)</span>

        <span class="c1"># if there is not tipper than skip</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">new_Z</span><span class="p">,</span> <span class="n">new_Tipper</span>

        <span class="c1"># interpolate the Tipper</span>
        <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="c1"># get indicies of non-zero components</span>
            <span class="n">nz_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">jj</span><span class="p">])</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nz_index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># get non-zero components</span>
            <span class="n">t_real</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span><span class="p">[</span><span class="n">nz_index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span><span class="o">.</span><span class="n">real</span>
            <span class="n">t_imag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper</span><span class="p">[</span><span class="n">nz_index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span>
            <span class="n">t_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">tipper_err</span><span class="p">[</span><span class="n">nz_index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span>

            <span class="c1"># get frequencies for non-zero components</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="o">.</span><span class="n">freq</span><span class="p">[</span><span class="n">nz_index</span><span class="p">]</span>

            <span class="c1"># create interpolation functions</span>
            <span class="n">t_func_real</span> <span class="o">=</span> <span class="n">spi</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">t_real</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">interp_type</span><span class="p">)</span>
            <span class="n">t_func_imag</span> <span class="o">=</span> <span class="n">spi</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">t_imag</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">interp_type</span><span class="p">)</span>
            <span class="n">t_func_err</span> <span class="o">=</span> <span class="n">spi</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">t_err</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">interp_type</span><span class="p">)</span>

            <span class="c1"># get new frequency to interpolate over, making sure bounds are</span>
            <span class="c1"># for non-zero components</span>
            <span class="n">new_nz_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">new_freq_array</span> <span class="o">&gt;=</span> <span class="n">f</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">&amp;</span>
                                    <span class="p">(</span><span class="n">new_freq_array</span> <span class="o">&lt;=</span> <span class="n">f</span><span class="o">.</span><span class="n">max</span><span class="p">()))</span>
            <span class="n">new_f</span> <span class="o">=</span> <span class="n">new_freq_array</span><span class="p">[</span><span class="n">new_nz_index</span><span class="p">]</span>

            <span class="c1"># interpolate onto new frequency range</span>
            <span class="n">new_Tipper</span><span class="o">.</span><span class="n">tipper</span><span class="p">[</span><span class="n">new_nz_index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">t_func_real</span><span class="p">(</span><span class="n">new_f</span><span class="p">)</span> <span class="o">+</span> \
                                                     <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">t_func_imag</span><span class="p">(</span><span class="n">new_f</span><span class="p">)</span>

            <span class="n">new_Tipper</span><span class="o">.</span><span class="n">tipper_err</span><span class="p">[</span><span class="n">new_nz_index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">t_func_err</span><span class="p">(</span><span class="n">new_f</span><span class="p">)</span>

        <span class="n">new_Tipper</span><span class="o">.</span><span class="n">compute_mag_direction</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">new_Z</span><span class="p">,</span> <span class="n">new_Tipper</span></div>

<div class="viewcode-block" id="MT.plot_mt_response"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT.plot_mt_response">[docs]</a>    <span class="k">def</span> <span class="nf">plot_mt_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a mtpy.imaging.plotresponse.PlotResponse object</span>

<span class="sd">        :Plot Response: ::</span>

<span class="sd">            &gt;&gt;&gt; mt_obj = mt.MT(edi_file)</span>
<span class="sd">            &gt;&gt;&gt; pr = mt.plot_mt_response()</span>
<span class="sd">            &gt;&gt;&gt; # if you need more infor on plot_mt_response</span>
<span class="sd">            &gt;&gt;&gt; help(pr)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">mtpy.imaging</span> <span class="k">import</span> <span class="n">plot_mt_response</span>
        <span class="c1"># todo change this to the format of the new imaging API</span>
        <span class="n">plot_obj</span> <span class="o">=</span> <span class="n">plot_mt_response</span><span class="o">.</span><span class="n">PlotMTResponse</span><span class="p">(</span><span class="n">z_object</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span>
                                                   <span class="n">t_object</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Tipper</span><span class="p">,</span>
                                                   <span class="n">pt_obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">,</span>
                                                   <span class="n">station</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="p">,</span>
                                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">plot_obj</span></div></div>
        <span class="c1"># raise NotImplementedError</span>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Site details</span>
<span class="c1"># ==============================================================================</span>


<div class="viewcode-block" id="Site"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Site">[docs]</a><span class="k">class</span> <span class="nc">Site</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information on the site, including location, id, etc.</span>

<span class="sd">    Holds the following information:</span>

<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    Attributes         Type        Explanation</span>
<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    aqcuired_by       string       name of company or person whom aqcuired the</span>
<span class="sd">                                   data.</span>
<span class="sd">    id                string       station name</span>
<span class="sd">    Location          object       Holds location information, lat, lon, elev</span>
<span class="sd">                      Location     datum, easting, northing see Location class</span>
<span class="sd">    start_date        string       YYYY-MM-DD start date of measurement</span>
<span class="sd">    end_date          string       YYYY-MM-DD end date of measurement</span>
<span class="sd">    year_collected    string       year data collected</span>
<span class="sd">    survey            string       survey name</span>
<span class="sd">    project           string       project name</span>
<span class="sd">    run_list          string       list of measurment runs ex. [mt01a, mt01b]</span>
<span class="sd">    ================= =========== =============================================</span>

<span class="sd">    More attributes can be added by inputing a key word dictionary</span>

<span class="sd">    &gt;&gt;&gt; Site(**{&#39;state&#39;:&#39;Nevada&#39;, &#39;Operator&#39;:&#39;MTExperts&#39;})</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acquired_by</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_date</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Location</span> <span class="o">=</span> <span class="n">Location</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_list</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">survey</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">year_collected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
    <span class="nd">@year_collected</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">year_collected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Location class, be sure to put locations in decimal degrees, and note datum</span>
<span class="c1"># ==============================================================================</span>


<div class="viewcode-block" id="Location"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Location">[docs]</a><span class="k">class</span> <span class="nc">Location</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    location details</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datum</span> <span class="o">=</span> <span class="s1">&#39;WGS84&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">declination</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">declination_epoch</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_elevation</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_latitude</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_longitude</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_northing</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_easting</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">utm_zone</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elev_units</span> <span class="o">=</span> <span class="s1">&#39;m&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coordinate_system</span> <span class="o">=</span> <span class="s1">&#39;Geographic North&#39;</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">latitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latitude</span>

    <span class="nd">@latitude</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">latitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_latitude</span> <span class="o">=</span> <span class="n">gis_tools</span><span class="o">.</span><span class="n">assert_lat_value</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">longitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_longitude</span>

    <span class="nd">@longitude</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">longitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_longitude</span> <span class="o">=</span> <span class="n">gis_tools</span><span class="o">.</span><span class="n">assert_lon_value</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">elevation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elevation</span>

    <span class="nd">@elevation</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">elevation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elev</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_elevation</span> <span class="o">=</span> <span class="n">gis_tools</span><span class="o">.</span><span class="n">assert_elevation_value</span><span class="p">(</span><span class="n">elev</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">easting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_easting</span>

    <span class="nd">@easting</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">easting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">easting</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_easting</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">easting</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_easting</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">northing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_northing</span>

    <span class="nd">@northing</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">northing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">northing</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_northing</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">northing</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_northing</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="Location.project_location2utm"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Location.project_location2utm">[docs]</a>    <span class="k">def</span> <span class="nf">project_location2utm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        project location coordinates into meters given the reference ellipsoid,</span>
<span class="sd">        for now that is constrained to WGS84</span>

<span class="sd">        Returns East, North, Zone</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">utm_point</span> <span class="o">=</span> <span class="n">gis_tools</span><span class="o">.</span><span class="n">project_point_ll2utm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_latitude</span><span class="p">,</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">_longitude</span><span class="p">,</span>
                                                   <span class="n">datum</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">datum</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">easting</span> <span class="o">=</span> <span class="n">utm_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">northing</span> <span class="o">=</span> <span class="n">utm_point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">utm_zone</span> <span class="o">=</span> <span class="n">utm_point</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div>

<div class="viewcode-block" id="Location.project_location2ll"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Location.project_location2ll">[docs]</a>    <span class="k">def</span> <span class="nf">project_location2ll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        project location coordinates into meters given the reference ellipsoid,</span>
<span class="sd">        for now that is constrained to WGS84</span>

<span class="sd">        Returns East, North, Zone</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ll_point</span> <span class="o">=</span> <span class="n">gis_tools</span><span class="o">.</span><span class="n">project_point_utm2ll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">easting</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">northing</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">utm_zone</span><span class="p">,</span>
                                                  <span class="n">datum</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">datum</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">ll_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">ll_point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Field Notes</span>
<span class="c1"># ==============================================================================</span>


<div class="viewcode-block" id="FieldNotes"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.FieldNotes">[docs]</a><span class="k">class</span> <span class="nc">FieldNotes</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Field note information.</span>


<span class="sd">    Holds the following information:</span>

<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    Attributes         Type        Explanation</span>
<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    data_quality      DataQuality notes on data quality</span>
<span class="sd">    electrode         Instrument      type of electrode used</span>
<span class="sd">    data_logger       Instrument      type of data logger</span>
<span class="sd">    magnetometer      Instrument      type of magnetotmeter</span>
<span class="sd">    ================= =========== =============================================</span>

<span class="sd">    More attributes can be added by inputing a key word dictionary</span>

<span class="sd">    &gt;&gt;&gt; FieldNotes(**{&#39;electrode_ex&#39;:&#39;Ag-AgCl 213&#39;, &#39;magnetometer_hx&#39;:&#39;102&#39;})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">null_emeas</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">EMeasurement</span><span class="p">()</span>
        <span class="n">null_hmeas</span> <span class="o">=</span> <span class="n">MTedi</span><span class="o">.</span><span class="n">HMeasurement</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">DataQuality</span> <span class="o">=</span> <span class="n">DataQuality</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DataLogger</span> <span class="o">=</span> <span class="n">Instrument</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Electrode_ex</span> <span class="o">=</span> <span class="n">Instrument</span><span class="p">(</span><span class="o">**</span><span class="n">null_emeas</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Electrode_ey</span> <span class="o">=</span> <span class="n">Instrument</span><span class="p">(</span><span class="o">**</span><span class="n">null_emeas</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Magnetometer_hx</span> <span class="o">=</span> <span class="n">Instrument</span><span class="p">(</span><span class="o">**</span><span class="n">null_hmeas</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Magnetometer_hy</span> <span class="o">=</span> <span class="n">Instrument</span><span class="p">(</span><span class="o">**</span><span class="n">null_hmeas</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Magnetometer_hz</span> <span class="o">=</span> <span class="n">Instrument</span><span class="p">(</span><span class="o">**</span><span class="n">null_hmeas</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Electrode_ex</span><span class="o">.</span><span class="n">chtype</span> <span class="o">=</span> <span class="s1">&#39;ex&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Electrode_ey</span><span class="o">.</span><span class="n">chtype</span> <span class="o">=</span> <span class="s1">&#39;ey&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Magnetometer_hx</span><span class="o">.</span><span class="n">chtype</span> <span class="o">=</span> <span class="s1">&#39;hx&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Magnetometer_hy</span><span class="o">.</span><span class="n">chtype</span> <span class="o">=</span> <span class="s1">&#39;hy&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Magnetometer_hz</span><span class="o">.</span><span class="n">chtype</span> <span class="o">=</span> <span class="s1">&#39;hz&#39;</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Instrument</span>
<span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="Instrument"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Instrument">[docs]</a><span class="k">class</span> <span class="nc">Instrument</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information on an instrument that was used.</span>

<span class="sd">    Holds the following information:</span>

<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    Attributes         Type        Explanation</span>
<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    id                string      serial number or id number of data logger</span>
<span class="sd">    manufacturer      string      company whom makes the instrument</span>
<span class="sd">    type              string      Broadband, long period, something else</span>
<span class="sd">    ================= =========== =============================================</span>

<span class="sd">    More attributes can be added by inputing a key word dictionary</span>

<span class="sd">    &gt;&gt;&gt; Instrument(**{&#39;ports&#39;:&#39;5&#39;, &#39;gps&#39;:&#39;time_stamped&#39;})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manufacturer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Data Quality</span>
<span class="c1"># ==============================================================================</span>


<div class="viewcode-block" id="DataQuality"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.DataQuality">[docs]</a><span class="k">class</span> <span class="nc">DataQuality</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information on data quality.</span>

<span class="sd">    Holds the following information:</span>

<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    Attributes         Type        Explanation</span>
<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    comments          string      comments on data quality</span>
<span class="sd">    good_from_period  float       minimum period data are good</span>
<span class="sd">    good_to_period    float       maximum period data are good</span>
<span class="sd">    rating            int         [1-5]; 1 = poor, 5 = excellent</span>
<span class="sd">    warrning_comments string      any comments on warnings in the data</span>
<span class="sd">    warnings_flag     int         [0-#of warnings]</span>
<span class="sd">    ================= =========== =============================================</span>

<span class="sd">    More attributes can be added by inputing a key word dictionary</span>

<span class="sd">    &gt;&gt;&gt;DataQuality(**{&#39;time_series_comments&#39;:&#39;Periodic Noise&#39;})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">good_from_period</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">good_to_period</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rating</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warnings_comments</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warnings_flag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Citation</span>
<span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="Citation"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Citation">[docs]</a><span class="k">class</span> <span class="nc">Citation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information for a citation.</span>

<span class="sd">    Holds the following information:</span>

<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    Attributes         Type        Explanation</span>
<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    author            string      Author names</span>
<span class="sd">    title             string      Title of article, or publication</span>
<span class="sd">    journal           string      Name of journal</span>
<span class="sd">    doi               string      DOI number (doi:10.110/sf454)</span>
<span class="sd">    year              int         year published</span>
<span class="sd">    ================= =========== =============================================</span>

<span class="sd">    More attributes can be added by inputing a key word dictionary</span>

<span class="sd">    &gt;&gt;&gt; Citation(**{&#39;volume&#39;:56, &#39;pages&#39;:&#39;234--214&#39;})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">journal</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volume</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doi</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Copyright</span>
<span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="Copyright"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Copyright">[docs]</a><span class="k">class</span> <span class="nc">Copyright</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information of copyright, mainly about how someone else can use these</span>
<span class="sd">    data. Be sure to read over the conditions_of_use.</span>

<span class="sd">    Holds the following information:</span>

<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    Attributes         Type        Explanation</span>
<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    citation          Citation    citation of published work using these data</span>
<span class="sd">    conditions_of_use string      conditions of use of these data</span>
<span class="sd">    release_status    string      release status [ open | public | proprietary]</span>
<span class="sd">    ================= =========== =============================================</span>

<span class="sd">    More attributes can be added by inputing a key word dictionary</span>

<span class="sd">    &gt;&gt;&gt; Copyright(**{&#39;owner&#39;:&#39;University of MT&#39;, &#39;contact&#39;:&#39;Cagniard&#39;})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Citation</span> <span class="o">=</span> <span class="n">Citation</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditions_of_use</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;All data and metadata for this survey are &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;available free of charge and may be copied &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;freely, duplicated and further distributed &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;provided this data set is cited as the &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;reference. While the author(s) strive to &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;provide data and metadata of best possible &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;quality, neither the author(s) of this data &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;set, not IRIS make any claims, promises, or &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;guarantees about the accuracy, completeness, &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;or adequacy of this information, and expressly &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;disclaim liability for errors and omissions in &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;the contents of this file. Guidelines about &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;the quality or limitations of the data and &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;metadata, as obtained from the author(s), are &#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;included for informational purposes only.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">release_status</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">additional_info</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Provenance</span>
<span class="c1"># ==============================================================================</span>


<div class="viewcode-block" id="Provenance"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Provenance">[docs]</a><span class="k">class</span> <span class="nc">Provenance</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information of the file history, how it was made</span>

<span class="sd">    Holds the following information:</span>

<span class="sd">    ====================== =========== ========================================</span>
<span class="sd">    Attributes             Type        Explanation</span>
<span class="sd">    ====================== =========== ========================================</span>
<span class="sd">    creation_time          string      creation time of file YYYY-MM-DD,hh:mm:ss</span>
<span class="sd">    creating_application   string      name of program creating the file</span>
<span class="sd">    creator                Person      person whom created the file</span>
<span class="sd">    submitter              Person      person whom is submitting file for</span>
<span class="sd">                                       archiving</span>
<span class="sd">    ====================== =========== ========================================</span>

<span class="sd">    More attributes can be added by inputing a key word dictionary</span>

<span class="sd">    &gt;&gt;&gt; Provenance(**{&#39;archive&#39;:&#39;IRIS&#39;, &#39;reprocessed_by&#39;:&#39;grad_student&#39;})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">creation_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">creating_application</span> <span class="o">=</span> <span class="s1">&#39;MTpy&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Creator</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Submitter</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Person</span>
<span class="c1"># ==============================================================================</span>


<div class="viewcode-block" id="Person"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Person">[docs]</a><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information for a person</span>

<span class="sd">    Holds the following information:</span>

<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    Attributes         Type        Explanation</span>
<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    email             string      email of person</span>
<span class="sd">    name              string      name of person</span>
<span class="sd">    organization      string      name of person&#39;s organization</span>
<span class="sd">    organization_url  string      organizations web address</span>
<span class="sd">    ================= =========== =============================================</span>

<span class="sd">    More attributes can be added by inputing a key word dictionary</span>

<span class="sd">    &gt;&gt;&gt; Person(**{&#39;phone&#39;:&#39;650-888-6666&#39;})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">organization</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">organization_url</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Processing</span>
<span class="c1"># ==============================================================================</span>


<div class="viewcode-block" id="Processing"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Processing">[docs]</a><span class="k">class</span> <span class="nc">Processing</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information for a processing</span>

<span class="sd">    Holds the following information:</span>

<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    Attributes         Type        Explanation</span>
<span class="sd">    ================= =========== =============================================</span>
<span class="sd">    email             string      email of person</span>
<span class="sd">    name              string      name of person</span>
<span class="sd">    organization      string      name of person&#39;s organization</span>
<span class="sd">    organization_url  string      organizations web address</span>
<span class="sd">    ================= =========== =============================================</span>

<span class="sd">    More attributes can be added by inputing a key word dictionary</span>

<span class="sd">    &gt;&gt;&gt; Person(**{&#39;phone&#39;:&#39;888-867-5309&#39;})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Software</span> <span class="o">=</span> <span class="n">Software</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processed_by</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sign_convention</span> <span class="o">=</span> <span class="s1">&#39;exp(+i \omega t)&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remote_reference</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RemoteSite</span> <span class="o">=</span> <span class="n">Site</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>


<div class="viewcode-block" id="Software"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.Software">[docs]</a><span class="k">class</span> <span class="nc">Software</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    software</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Author</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1">#             Error</span>
<span class="c1"># ==============================================================================</span>


<div class="viewcode-block" id="MT_Error"><a class="viewcode-back" href="../../../core.html#mtpy.core.mt.MT_Error">[docs]</a><span class="k">class</span> <span class="nc">MT_Error</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../master_doc.html">mtpy 1.01.01 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Geoscience Australia.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.2.
    </div>
  </body>
</html>